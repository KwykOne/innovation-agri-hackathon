{"ast":null,"code":"import _classCallCheck from \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\src\\\\components\\\\Mobile\\\\Cart\\\\CartCheckoutBlock\\\\index.js\";\nimport React, { Component } from \"react\"; // import DelayLink from \"../../../helpers/delayLink\";\n\nimport Ink from \"react-ink\"; // import { Link } from \"react-router-dom\";\n\nimport { checkConfirmCart, checkCartItemsAvailability } from \"../../../../services/confirmCart/actions\";\nimport { connect } from \"react-redux\";\nimport { placeOrder } from \"../../../../services/checkout/actions\";\nimport { addProduct } from \"../../../../services/cart/actions\";\nimport { updateCart } from \"../../../../services/total/actions\";\n\nvar CartCheckoutBlock =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CartCheckoutBlock, _Component);\n\n  function CartCheckoutBlock() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, CartCheckoutBlock);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CartCheckoutBlock)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      process_cart_loading: false\n    };\n\n    _this.processCart = function () {\n      var _this$props = _this.props,\n          handleProcessCartLoading = _this$props.handleProcessCartLoading,\n          checkCartItemsAvailability = _this$props.checkCartItemsAvailability,\n          cartProducts = _this$props.cartProducts,\n          addProduct = _this$props.addProduct,\n          updateCart = _this$props.updateCart,\n          checkConfirmCart = _this$props.checkConfirmCart,\n          handleItemsAvailability = _this$props.handleItemsAvailability;\n      handleProcessCartLoading(true);\n      checkCartItemsAvailability(cartProducts).then(function (response) {\n        handleProcessCartLoading(false);\n\n        _this.setState({\n          process_cart_loading: false\n        });\n\n        if (response && response.length) {\n          var isSomeInactive = false;\n          response.map(function (arrItem) {\n            //find the item in the cart\n            var item = cartProducts.find(function (item) {\n              return item.id === arrItem.id;\n            }); //get new price and is_active status and set it.\n\n            item.is_active = arrItem.is_active;\n            item.price = arrItem.price;\n            addProduct(item);\n\n            if (!isSomeInactive) {\n              if (!arrItem.is_active) {\n                isSomeInactive = true;\n              }\n            }\n\n            return item;\n          });\n\n          if (isSomeInactive) {\n            updateCart(_this.props.cartProducts);\n            handleItemsAvailability(false);\n          } else {\n            updateCart(_this.props.cartProducts);\n            checkConfirmCart();\n\n            _this.context.router.history.push(\"/checkout\");\n          }\n        }\n      });\n    };\n\n    _this.gotoNewAddressPage = function () {\n      localStorage.setItem(\"fromCart\", 1);\n\n      _this.context.router.history.push(\"/search-location\");\n    };\n\n    _this.gotoMyAddressPage = function () {\n      localStorage.setItem(\"fromCart\", 1);\n\n      _this.context.router.history.push(\"/my-addresses\");\n    };\n\n    _this.gotoLoginPage = function () {\n      localStorage.setItem(\"fromCartToLogin\", 1);\n\n      _this.context.router.history.push(\"/login\");\n    };\n\n    return _this;\n  }\n\n  _createClass(CartCheckoutBlock, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {// this.props.checkForItemsAvailability();\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      // const { checkout} = this.props;\n      if (nextProps.checkout !== this.props.checkout) {\n        //redirect to running order page\n        this.context.router.history.push(\"/running-order\");\n      } // console.log(\"NEXT PROPS - \" + nextProps.is_operational);\n      // if (nextProps.is_operational !== this.props.is_operational) {\n      //     console.log(\"Came here -> FROM CHILD\");\n      //     this.setState({ is_operational: false, loading: false });\n      // }\n\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      // console.log(\"LOADING - \" + this.state.loading);\n      console.log(\"CHECKOUT PROP\", this.props);\n      var user = this.props.user;\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"bg-white cart-checkout-block\",\n        style: {\n          height: user.success && localStorage.getItem(\"userSelected\") === \"SELFPICKUP\" ? \"auto\" : \"22vh\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, user.success ? user.data.default_address == null ? React.createElement(\"div\", {\n        className: \"p-15\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"almost-there-text m-0 pb-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, localStorage.getItem(\"cartSetYourAddress\")), React.createElement(\"button\", {\n        onClick: this.gotoNewAddressPage,\n        className: \"btn btn-lg btn-continue\",\n        style: {\n          position: \"relative\",\n          backgroundColor: localStorage.getItem(\"storeColor\")\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, localStorage.getItem(\"buttonNewAddress\"), React.createElement(Ink, {\n        duration: 500,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }))) : React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, (localStorage.getItem(\"userSelected\") === \"DELIVERY\" || localStorage.getItem(\"userSelected\") === null) && React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"px-15 py-10\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.gotoMyAddressPage,\n        className: \"change-address-text m-0 p-5 pull-right\",\n        style: {\n          color: localStorage.getItem(\"storeColor\")\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, localStorage.getItem(\"cartChangeLocation\"), React.createElement(Ink, {\n        duration: 400,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      })), React.createElement(\"h2\", {\n        className: \"deliver-to-text m-0 pl-0 pb-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, localStorage.getItem(\"cartDeliverTo\")), React.createElement(\"div\", {\n        className: \"user-address truncate-text m-0 pt-10\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, user.data.default_address.address, user.data.default_address.house !== null && React.createElement(\"p\", {\n        className: \"truncate-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, user.data.default_address.house)))), Object.keys(this.props.delivery_datetime).length === 0 && this.props.deliveryCharges == 0 ? React.createElement(\"div\", {\n        className: \"btn btn-lg btn-make-payment\",\n        style: {\n          backgroundColor: localStorage.getItem(\"cartColorBg\"),\n          color: localStorage.getItem(\"cartColorText\"),\n          position: \"relative\"\n        },\n        onClick: function onClick() {\n          return alert(\"Please Select Delivery time Slot\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, localStorage.getItem(\"checkoutSelectPayment\"), React.createElement(Ink, {\n        duration: 400,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      })) : React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, this.props.is_operational ? React.createElement(\"div\", {\n        style: {\n          marginTop: \"1.6rem\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        onClick: this.processCart,\n        className: \"btn btn-lg btn-make-payment\",\n        style: {\n          backgroundColor: localStorage.getItem(\"cartColorBg\"),\n          color: localStorage.getItem(\"cartColorText\"),\n          position: \"relative\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, localStorage.getItem(\"checkoutSelectPayment\"), React.createElement(Ink, {\n        duration: 400,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }))) : React.createElement(\"div\", {\n        className: \"auth-error bg-danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"error-shake\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, localStorage.getItem(\"cartRestaurantNotOperational\"))))) : React.createElement(\"div\", {\n        className: \"p-15\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"almost-there-text m-0 pb-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, localStorage.getItem(\"cartLoginHeader\")), React.createElement(\"span\", {\n        className: \"almost-there-sub text-muted\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, localStorage.getItem(\"cartLoginSubHeader\")), React.createElement(\"button\", {\n        onClick: this.gotoLoginPage,\n        className: \"btn btn-lg btn-continue\",\n        style: {\n          backgroundColor: localStorage.getItem(\"storeColor\"),\n          position: \"relative\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, localStorage.getItem(\"cartLoginButtonText\"), React.createElement(Ink, {\n        duration: 500,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return CartCheckoutBlock;\n}(Component);\n\nCartCheckoutBlock.contextTypes = {\n  router: function router() {\n    return null;\n  }\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    user: state.user.user,\n    addresses: state.addresses.addresses,\n    cartProducts: state.cart.products,\n    cartTotal: state.total.data,\n    coupon: state.coupon.coupon,\n    checkout: state.checkout.checkout,\n    restaurant: state.restaurant,\n    deliveryCharges: state.delivery_datetime.deliveryCharges,\n    delivery_datetime: state.delivery_datetime.delivery_datetime\n  };\n};\n\nexport default connect(mapStateToProps, {\n  placeOrder: placeOrder,\n  checkConfirmCart: checkConfirmCart,\n  checkCartItemsAvailability: checkCartItemsAvailability,\n  addProduct: addProduct,\n  updateCart: updateCart\n})(CartCheckoutBlock);","map":{"version":3,"sources":["C:\\xampp\\htdocs\\foodomaa\\src\\components\\Mobile\\Cart\\CartCheckoutBlock\\index.js"],"names":["React","Component","Ink","checkConfirmCart","checkCartItemsAvailability","connect","placeOrder","addProduct","updateCart","CartCheckoutBlock","state","process_cart_loading","processCart","props","handleProcessCartLoading","cartProducts","handleItemsAvailability","then","response","setState","length","isSomeInactive","map","arrItem","item","find","id","is_active","price","context","router","history","push","gotoNewAddressPage","localStorage","setItem","gotoMyAddressPage","gotoLoginPage","nextProps","checkout","console","log","user","height","success","getItem","data","default_address","position","backgroundColor","color","address","house","Object","keys","delivery_datetime","deliveryCharges","alert","is_operational","marginTop","contextTypes","mapStateToProps","addresses","cart","products","cartTotal","total","coupon","restaurant"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\n\r\n// import DelayLink from \"../../../helpers/delayLink\";\r\nimport Ink from \"react-ink\";\r\n// import { Link } from \"react-router-dom\";\r\nimport { checkConfirmCart, checkCartItemsAvailability } from \"../../../../services/confirmCart/actions\";\r\nimport { connect } from \"react-redux\";\r\nimport { placeOrder } from \"../../../../services/checkout/actions\";\r\nimport { addProduct } from \"../../../../services/cart/actions\";\r\nimport { updateCart } from \"../../../../services/total/actions\";\r\n\r\nclass CartCheckoutBlock extends Component {\r\n\tstatic contextTypes = {\r\n\t\trouter: () => null,\r\n\t};\r\n\t// state = {\r\n\t//     loading: true,\r\n\t//     is_operational: true\r\n\t// };\r\n\r\n\tstate = {\r\n\t\tprocess_cart_loading: false,\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\t// this.props.checkForItemsAvailability();\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\t// const { checkout} = this.props;\r\n\t\tif (nextProps.checkout !== this.props.checkout) {\r\n\t\t\t//redirect to running order page\r\n\t\t\tthis.context.router.history.push(\"/running-order\");\r\n\t\t}\r\n\t\t// console.log(\"NEXT PROPS - \" + nextProps.is_operational);\r\n\t\t// if (nextProps.is_operational !== this.props.is_operational) {\r\n\t\t//     console.log(\"Came here -> FROM CHILD\");\r\n\t\t//     this.setState({ is_operational: false, loading: false });\r\n\t\t// }\r\n\t}\r\n\r\n\tprocessCart = () => {\r\n\t\tconst {\r\n\t\t\thandleProcessCartLoading,\r\n\t\t\tcheckCartItemsAvailability,\r\n\t\t\tcartProducts,\r\n\t\t\taddProduct,\r\n\t\t\tupdateCart,\r\n\t\t\tcheckConfirmCart,\r\n\t\t\thandleItemsAvailability,\r\n\t\t} = this.props;\r\n\r\n\t\thandleProcessCartLoading(true);\r\n\r\n\t\tcheckCartItemsAvailability(cartProducts).then((response) => {\r\n\t\t\thandleProcessCartLoading(false);\r\n\t\t\tthis.setState({ process_cart_loading: false });\r\n\r\n\t\t\tif (response && response.length) {\r\n\t\t\t\tlet isSomeInactive = false;\r\n\t\t\t\tresponse.map((arrItem) => {\r\n\t\t\t\t\t//find the item in the cart\r\n\t\t\t\t\tlet item = cartProducts.find((item) => item.id === arrItem.id);\r\n\t\t\t\t\t//get new price and is_active status and set it.\r\n\t\t\t\t\titem.is_active = arrItem.is_active;\r\n\t\t\t\t\titem.price = arrItem.price;\r\n\t\t\t\t\taddProduct(item);\r\n\r\n\t\t\t\t\tif (!isSomeInactive) {\r\n\t\t\t\t\t\tif (!arrItem.is_active) {\r\n\t\t\t\t\t\t\tisSomeInactive = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t});\r\n\t\t\t\tif (isSomeInactive) {\r\n\t\t\t\t\tupdateCart(this.props.cartProducts);\r\n\t\t\t\t\thandleItemsAvailability(false);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tupdateCart(this.props.cartProducts);\r\n\t\t\t\t\tcheckConfirmCart();\r\n\t\t\t\t\tthis.context.router.history.push(\"/checkout\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tgotoNewAddressPage = () => {\r\n\t\tlocalStorage.setItem(\"fromCart\", 1);\r\n\t\tthis.context.router.history.push(\"/search-location\");\r\n\t};\r\n\tgotoMyAddressPage = () => {\r\n\t\tlocalStorage.setItem(\"fromCart\", 1);\r\n\t\tthis.context.router.history.push(\"/my-addresses\");\r\n\t};\r\n\tgotoLoginPage = () => {\r\n\t\tlocalStorage.setItem(\"fromCartToLogin\", 1);\r\n\t\tthis.context.router.history.push(\"/login\");\r\n\t};\r\n\r\n\trender() {\r\n\t\t// console.log(\"LOADING - \" + this.state.loading);\r\n\t\tconsole.log(\"CHECKOUT PROP\",this.props)\r\n\t\tconst { user } = this.props;\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"bg-white cart-checkout-block\"\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\theight: user.success && localStorage.getItem(\"userSelected\") === \"SELFPICKUP\" ? \"auto\" : \"22vh\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{user.success ? (\r\n\t\t\t\t\t\tuser.data.default_address == null ? (\r\n\t\t\t\t\t\t\t<div className=\"p-15\">\r\n\t\t\t\t\t\t\t\t<h2 className=\"almost-there-text m-0 pb-5\">\r\n\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"cartSetYourAddress\")}\r\n\t\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tonClick={this.gotoNewAddressPage}\r\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn-lg btn-continue\"\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tposition: \"relative\",\r\n\t\t\t\t\t\t\t\t\t\tbackgroundColor: localStorage.getItem(\"storeColor\"),\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"buttonNewAddress\")}\r\n\t\t\t\t\t\t\t\t\t<Ink duration={500} />\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t{(localStorage.getItem(\"userSelected\") === \"DELIVERY\" ||\r\n\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"userSelected\") === null) && (\r\n\t\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"px-15 py-10\">\r\n\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.gotoMyAddressPage}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"change-address-text m-0 p-5 pull-right\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: localStorage.getItem(\"storeColor\"),\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"cartChangeLocation\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Ink duration={400} />\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t<h2 className=\"deliver-to-text m-0 pl-0 pb-5\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"cartDeliverTo\")}\r\n\t\t\t\t\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"user-address truncate-text m-0 pt-10\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{user.data.default_address.address}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{user.data.default_address.house !== null && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"truncate-text\">{user.data.default_address.house}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t{Object.keys(this.props.delivery_datetime).length === 0 && this.props.deliveryCharges == 0 ?\r\n\t\t\t\t\t\t\t\t<div className=\"btn btn-lg btn-make-payment\" style={{\r\n                                    backgroundColor: localStorage.getItem(\r\n                                        \"cartColorBg\"\r\n                                    ),\r\n                                    color: localStorage.getItem(\r\n                                        \"cartColorText\"\r\n                                    ),\r\n                                    position: \"relative\"\r\n                                }} onClick={()=>alert(\"Please Select Delivery time Slot\")}> \r\n                                    {localStorage.getItem(\r\n                                        \"checkoutSelectPayment\"\r\n                                    )}\r\n                                    <Ink duration={400} />\r\n                                </div>:\r\n\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t{this.props.is_operational ? (\r\n\t\t\t\t\t\t\t\t\t\t<div style={{ marginTop: \"1.6rem\" }}>\r\n\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.processCart}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn-lg btn-make-payment\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: localStorage.getItem(\"cartColorBg\"),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: localStorage.getItem(\"cartColorText\"),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tposition: \"relative\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"checkoutSelectPayment\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Ink duration={400} />\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"auth-error bg-danger\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"error-shake\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"cartRestaurantNotOperational\")}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</React.Fragment>}\r\n\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<div className=\"p-15\">\r\n\t\t\t\t\t\t\t<h2 className=\"almost-there-text m-0 pb-5\">{localStorage.getItem(\"cartLoginHeader\")}</h2>\r\n\t\t\t\t\t\t\t<span className=\"almost-there-sub text-muted\">\r\n\t\t\t\t\t\t\t\t{localStorage.getItem(\"cartLoginSubHeader\")}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={this.gotoLoginPage}\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn-lg btn-continue\"\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tbackgroundColor: localStorage.getItem(\"storeColor\"),\r\n\t\t\t\t\t\t\t\t\tposition: \"relative\",\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{localStorage.getItem(\"cartLoginButtonText\")}\r\n\t\t\t\t\t\t\t\t<Ink duration={500} />\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tuser: state.user.user,\r\n\taddresses: state.addresses.addresses,\r\n\tcartProducts: state.cart.products,\r\n\tcartTotal: state.total.data,\r\n\tcoupon: state.coupon.coupon,\r\n\tcheckout: state.checkout.checkout,\r\n\trestaurant: state.restaurant,\r\n\tdeliveryCharges:state.delivery_datetime.deliveryCharges,\r\n\tdelivery_datetime: state.delivery_datetime.delivery_datetime,\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\t{\r\n\t\tplaceOrder,\r\n\t\tcheckConfirmCart,\r\n\t\tcheckCartItemsAvailability,\r\n\t\taddProduct,\r\n\t\tupdateCart,\r\n\t}\r\n)(CartCheckoutBlock);\r\n"]},"metadata":{},"sourceType":"module"}