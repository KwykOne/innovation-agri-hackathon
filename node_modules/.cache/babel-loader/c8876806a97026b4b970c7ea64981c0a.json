{"ast":null,"code":"import _objectSpread from \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\src\\\\components\\\\Mobile\\\\GeoLocationPage\\\\GoogleMap\\\\index.js\";\nimport { GoogleApiWrapper, Map } from \"google-maps-react\";\nimport React, { Component } from \"react\";\nimport ContentLoader from \"react-content-loader\";\nimport mapStyle from \"../mapStyle.json\";\nimport Bounce from \"react-reveal/Bounce\";\n\nvar GoogleMap =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(GoogleMap, _Component);\n\n  function GoogleMap() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, GoogleMap);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(GoogleMap)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      initialPosition: {\n        lat: 37.77,\n        lng: -122.42\n      },\n      zoom: 15,\n      isAllowedLocationToDetect: true,\n      hideErrorMessage: false,\n      getCurrentAddress: false,\n      centerAroundCurrentLocation: false,\n      center: {}\n    };\n\n    _this.onMarkerClick = function () {\n      navigator.geolocation.getCurrentPosition(function (position) {\n        _this.setState(function (prevState) {\n          return {\n            center: _objectSpread({}, prevState.center, {\n              lat: position.coords.latitude,\n              lng: position.coords.longitude\n            }),\n            centerAroundCurrentLocation: true\n          };\n        });\n\n        _this.getCurrentLocation(position.coords.latitude, position.coords.longitude);\n      });\n      navigator.permissions.query({\n        name: \"geolocation\"\n      }).then(function (result) {\n        console.log(result);\n\n        if (result.state === \"granted\") {\n          _this.handleGPS(true);\n        } else if (result.state === \"prompt\") {\n          _this.handleGPS(true);\n        } else if (result.state === \"denied\") {\n          _this.handleGPS(false);\n        }\n\n        result.onchange = function (res) {\n          if (res.currentTarget.state === \"denied\") {\n            _this.handleGPS(false);\n          }\n\n          if (res.currentTarget.state === \"granted\") {\n            _this.handleGPS(true);\n\n            _this.handleMap();\n          }\n        };\n      });\n    };\n\n    _this.handleMap = function () {\n      _this.setState({\n        getCurrentAddress: true\n      });\n    };\n\n    _this.handleGPS = function (val) {\n      _this.setState({\n        isAllowedLocationToDetect: val,\n        hideErrorMessage: true\n      });\n    };\n\n    _this.onDrag = function () {\n      _this.setState({\n        isAllowedLocationToDetect: true,\n        getCurrentAddress: false\n      });\n    };\n\n    _this.getCurrentLocation = function (lat, lng) {\n      _this.props.reverseLookup(lat, lng);\n    };\n\n    return _this;\n  }\n\n  _createClass(GoogleMap, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      if (localStorage.getItem(\"geoLocation\") !== null) {\n        var location = JSON.parse(localStorage.getItem(\"geoLocation\")).geometry.location;\n        this.setState({\n          initialPosition: {\n            lat: location.lat,\n            lng: location.lng\n          }\n        });\n      }\n\n      setTimeout(function () {\n        _this2.setState({\n          zoom: 18\n        });\n      }, 1 * 1000);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(Map, {\n        google: this.props.google,\n        style: {\n          width: \"100%\",\n          height: \"55vh\"\n        },\n        initialCenter: {\n          lat: JSON.parse(localStorage.getItem(\"geoLocation\")).geometry.location.lat,\n          lng: JSON.parse(localStorage.getItem(\"geoLocation\")).geometry.location.lng\n        },\n        onDragend: function onDragend(t, map, coord) {\n          return _this3.props.onMarkerDragEnd(map);\n        },\n        zoom: this.state.zoom,\n        styles: mapStyle,\n        zoomControl: false,\n        mapTypeControl: false,\n        scaleControl: true,\n        streetViewControl: false,\n        fullscreenControl: false,\n        onReady: function onReady(mapProps, map) {\n          _this3.props.dragging ? _this3.props.reverseLookup(_this3.state.initialPosition.lat, _this3.state.initialPosition.lng) : _this3.props.location(_this3.state.initialPosition.lat, _this3.state.initialPosition.lng);\n          localStorage.setItem(\"userLat\", map.center.lat());\n          localStorage.setItem(\"userLng\", map.center.lng());\n        },\n        onDragstart: function onDragstart() {\n          _this3.props.handleDragging(true);\n\n          _this3.setState({\n            isAllowedLocationToDetect: true\n          });\n\n          _this3.onDrag();\n        },\n        centerAroundCurrentLocation: this.state.centerAroundCurrentLocation,\n        center: this.state.center,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        onClick: this.onMarkerClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"current-location-icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"si si-compass\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }))), !this.state.isAllowedLocationToDetect && React.createElement(\"div\", {\n        className: \"auth-error\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"error-shake\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, localStorage.getItem(\"gpsAccessNotGrantedMsg\")))), React.createElement(\"div\", {\n        className: \"center-marker-pulse\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(Bounce, {\n        top: true,\n        duration: 1000,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: \"/assets/img/various/dragable-markerv2.png\",\n        alt: \"Marker\",\n        className: \"center-marker\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return GoogleMap;\n}(Component);\n\nvar MapLoadingContainer = function MapLoadingContainer() {\n  return React.createElement(ContentLoader, {\n    height: 400,\n    width: window.innerWidth,\n    speed: 1.2,\n    primaryColor: \"#f3f3f3\",\n    secondaryColor: \"#ecebeb\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  }, React.createElement(\"rect\", {\n    x: \"0\",\n    y: \"0\",\n    rx: \"0\",\n    ry: \"0\",\n    width: window.innerWidth,\n    height: \"400\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }));\n};\n\nexport default GoogleApiWrapper({\n  apiKey: localStorage.getItem(\"googleApiKey\"),\n  LoadingContainer: MapLoadingContainer\n})(GoogleMap);","map":{"version":3,"sources":["C:\\xampp\\htdocs\\foodomaa\\src\\components\\Mobile\\GeoLocationPage\\GoogleMap\\index.js"],"names":["GoogleApiWrapper","Map","React","Component","ContentLoader","mapStyle","Bounce","GoogleMap","state","initialPosition","lat","lng","zoom","isAllowedLocationToDetect","hideErrorMessage","getCurrentAddress","centerAroundCurrentLocation","center","onMarkerClick","navigator","geolocation","getCurrentPosition","position","setState","prevState","coords","latitude","longitude","getCurrentLocation","permissions","query","name","then","result","console","log","handleGPS","onchange","res","currentTarget","handleMap","val","onDrag","props","reverseLookup","localStorage","getItem","location","JSON","parse","geometry","setTimeout","google","width","height","t","map","coord","onMarkerDragEnd","mapProps","dragging","setItem","handleDragging","MapLoadingContainer","window","innerWidth","apiKey","LoadingContainer"],"mappings":"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","sourcesContent":["import { GoogleApiWrapper, Map } from \"google-maps-react\";\r\nimport React, { Component } from \"react\";\r\n\r\nimport ContentLoader from \"react-content-loader\";\r\nimport mapStyle from \"../mapStyle.json\";\r\nimport Bounce from \"react-reveal/Bounce\";\r\n\r\nclass GoogleMap extends Component {\r\n\tstate = {\r\n\t\tinitialPosition: {\r\n\t\t\tlat: 37.77,\r\n\t\t\tlng: -122.42,\r\n\t\t},\r\n\t\tzoom: 15,\r\n\t\tisAllowedLocationToDetect: true,\r\n\t\thideErrorMessage: false,\r\n\t\tgetCurrentAddress: false,\r\n\t\tcenterAroundCurrentLocation: false,\r\n\t\tcenter: {},\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (localStorage.getItem(\"geoLocation\") !== null) {\r\n\t\t\tconst location = JSON.parse(localStorage.getItem(\"geoLocation\")).geometry.location;\r\n\t\t\tthis.setState({ initialPosition: { lat: location.lat, lng: location.lng } });\r\n\t\t}\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.setState({ zoom: 18 });\r\n\t\t}, 1 * 1000);\r\n\t}\r\n\r\n\tonMarkerClick = () => {\r\n\t\tnavigator.geolocation.getCurrentPosition((position) => {\r\n\t\t\tthis.setState((prevState) => ({\r\n\t\t\t\tcenter: {\r\n\t\t\t\t\t...prevState.center,\r\n\t\t\t\t\tlat: position.coords.latitude,\r\n\t\t\t\t\tlng: position.coords.longitude,\r\n\t\t\t\t},\r\n\t\t\t\tcenterAroundCurrentLocation: true,\r\n\t\t\t}));\r\n\r\n\t\t\tthis.getCurrentLocation(position.coords.latitude, position.coords.longitude);\r\n\t\t});\r\n\r\n\t\tnavigator.permissions\r\n\t\t\t.query({\r\n\t\t\t\tname: \"geolocation\",\r\n\t\t\t})\r\n\t\t\t.then((result) => {\r\n\t\t\t\tconsole.log(result);\r\n\t\t\t\tif (result.state === \"granted\") {\r\n\t\t\t\t\tthis.handleGPS(true);\r\n\t\t\t\t} else if (result.state === \"prompt\") {\r\n\t\t\t\t\tthis.handleGPS(true);\r\n\t\t\t\t} else if (result.state === \"denied\") {\r\n\t\t\t\t\tthis.handleGPS(false);\r\n\t\t\t\t}\r\n\t\t\t\tresult.onchange = (res) => {\r\n\t\t\t\t\tif (res.currentTarget.state === \"denied\") {\r\n\t\t\t\t\t\tthis.handleGPS(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (res.currentTarget.state === \"granted\") {\r\n\t\t\t\t\t\tthis.handleGPS(true);\r\n\t\t\t\t\t\tthis.handleMap();\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t};\r\n\r\n\thandleMap = () => {\r\n\t\tthis.setState({ getCurrentAddress: true });\r\n\t};\r\n\r\n\thandleGPS = (val) => {\r\n\t\tthis.setState({ isAllowedLocationToDetect: val, hideErrorMessage: true });\r\n\t};\r\n\r\n\tonDrag = () => {\r\n\t\tthis.setState({ isAllowedLocationToDetect: true, getCurrentAddress: false });\r\n\t};\r\n\r\n\tgetCurrentLocation = (lat, lng) => {\r\n\t\tthis.props.reverseLookup(lat, lng);\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Map\r\n\t\t\t\t\t\tgoogle={this.props.google}\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t\t\t\theight: \"55vh\",\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tinitialCenter={{\r\n\t\t\t\t\t\t\tlat: JSON.parse(localStorage.getItem(\"geoLocation\")).geometry.location.lat,\r\n\t\t\t\t\t\t\tlng: JSON.parse(localStorage.getItem(\"geoLocation\")).geometry.location.lng,\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonDragend={(t, map, coord) => this.props.onMarkerDragEnd(map)}\r\n\t\t\t\t\t\tzoom={this.state.zoom}\r\n\t\t\t\t\t\tstyles={mapStyle}\r\n\t\t\t\t\t\tzoomControl={false}\r\n\t\t\t\t\t\tmapTypeControl={false}\r\n\t\t\t\t\t\tscaleControl={true}\r\n\t\t\t\t\t\tstreetViewControl={false}\r\n\t\t\t\t\t\tfullscreenControl={false}\r\n\t\t\t\t\t\tonReady={(mapProps, map) => {\r\n\t\t\t\t\t\t\tthis.props.dragging\r\n\t\t\t\t\t\t\t\t? this.props.reverseLookup(\r\n\t\t\t\t\t\t\t\t\t\tthis.state.initialPosition.lat,\r\n\t\t\t\t\t\t\t\t\t\tthis.state.initialPosition.lng\r\n\t\t\t\t\t\t\t\t  )\r\n\t\t\t\t\t\t\t\t: this.props.location(this.state.initialPosition.lat, this.state.initialPosition.lng);\r\n\t\t\t\t\t\t\tlocalStorage.setItem(\"userLat\", map.center.lat());\r\n\t\t\t\t\t\t\tlocalStorage.setItem(\"userLng\", map.center.lng());\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonDragstart={() => {\r\n\t\t\t\t\t\t\tthis.props.handleDragging(true);\r\n\t\t\t\t\t\t\tthis.setState({ isAllowedLocationToDetect: true });\r\n\t\t\t\t\t\t\tthis.onDrag();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tcenterAroundCurrentLocation={this.state.centerAroundCurrentLocation}\r\n\t\t\t\t\t\tcenter={this.state.center}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div onClick={this.onMarkerClick}>\r\n\t\t\t\t\t\t\t<div className=\"current-location-icon\">\r\n\t\t\t\t\t\t\t\t<i className=\"si si-compass\" />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{!this.state.isAllowedLocationToDetect && (\r\n\t\t\t\t\t\t\t<div className=\"auth-error\">\r\n\t\t\t\t\t\t\t\t<div className=\"error-shake\">{localStorage.getItem(\"gpsAccessNotGrantedMsg\")}</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Map>\r\n\r\n\t\t\t\t\t<div className=\"center-marker-pulse\">\r\n\t\t\t\t\t\t<Bounce top duration={1000}>\r\n\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\tsrc=\"/assets/img/various/dragable-markerv2.png\"\r\n\t\t\t\t\t\t\t\talt=\"Marker\"\r\n\t\t\t\t\t\t\t\tclassName=\"center-marker\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Bounce>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst MapLoadingContainer = () => (\r\n\t<ContentLoader height={400} width={window.innerWidth} speed={1.2} primaryColor=\"#f3f3f3\" secondaryColor=\"#ecebeb\">\r\n\t\t<rect x=\"0\" y=\"0\" rx=\"0\" ry=\"0\" width={window.innerWidth} height=\"400\" />\r\n\t</ContentLoader>\r\n);\r\n\r\nexport default GoogleApiWrapper({\r\n\tapiKey: localStorage.getItem(\"googleApiKey\"),\r\n\tLoadingContainer: MapLoadingContainer,\r\n})(GoogleMap);\r\n"]},"metadata":{},"sourceType":"module"}