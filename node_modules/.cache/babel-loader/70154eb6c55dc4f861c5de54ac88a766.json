{"ast":null,"code":"import _classCallCheck from \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\src\\\\components\\\\Mobile\\\\Cart\\\\BillDetails\\\\index.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { formatPrice } from \"../../../helpers/formatPrice\";\nimport { couponApplied } from \"../../../../services/coupon/actions\";\n\nvar BillDetails =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(BillDetails, _Component);\n\n  function BillDetails() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, BillDetails);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(BillDetails)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      delivery_charges: 0,\n      distance: 0,\n      tips: 0,\n      couponAppliedAmount: 0\n    };\n\n    _this.calculateDynamicDeliveryCharge = function () {\n      var restaurant_info = _this.props.restaurant_info;\n      var distanceFromUserToRestaurant = _this.state.distance;\n      console.log(\"Distance from user to restaurant: \" + distanceFromUserToRestaurant + \" km\");\n\n      if (distanceFromUserToRestaurant > restaurant_info.base_delivery_distance) {\n        var extraDistance = distanceFromUserToRestaurant - restaurant_info.base_delivery_distance;\n        console.log(\"Extra Distance: \" + extraDistance + \" km\");\n        var extraCharge = extraDistance / restaurant_info.extra_delivery_distance * restaurant_info.extra_delivery_charge;\n        console.log(\"Extra Charge: \" + extraCharge);\n        var dynamicDeliveryCharge = parseFloat(restaurant_info.base_delivery_charge) + parseFloat(extraCharge);\n        console.log(\"Total Charge: \" + dynamicDeliveryCharge);\n\n        if (localStorage.getItem(\"enDelChrRnd\") === \"true\") {\n          dynamicDeliveryCharge = Math.ceil(dynamicDeliveryCharge);\n        }\n\n        _this.setState({\n          delivery_charges: dynamicDeliveryCharge\n        });\n      } else {\n        _this.setState({\n          delivery_charges: restaurant_info.base_delivery_charge\n        });\n      }\n    };\n\n    _this.getTotalAfterCalculation = function () {\n      var _this$props = _this.props,\n          total = _this$props.total,\n          restaurant_info = _this$props.restaurant_info,\n          coupon = _this$props.coupon,\n          tips = _this$props.tips,\n          deliveryCharges = _this$props.deliveryCharges;\n      var calc = 0;\n\n      if (coupon.code) {\n        if (coupon.discount_type === \"PERCENTAGE\") {\n          var percentage_discount = formatPrice(coupon.discount / 100 * parseFloat(total));\n\n          if (coupon.max_discount) {\n            if (parseFloat(percentage_discount) >= coupon.max_discount) {\n              percentage_discount = coupon.max_discount;\n            }\n          }\n\n          _this.props.couponApplied(coupon, percentage_discount);\n\n          var saveCouponAppliedAmount = new Promise(function (resolve) {\n            localStorage.setItem(\"couponAppliedAmount\", percentage_discount);\n            resolve(\"Saved\");\n          });\n          saveCouponAppliedAmount.then(function () {\n            _this.checkAndSetAppliedAmount();\n          });\n          calc = formatPrice(formatPrice(parseFloat(total) - percentage_discount + parseFloat(restaurant_info.restaurant_charges || 0.0) + parseFloat(_this.state.delivery_charges || 0.0)));\n        } else {\n          calc = formatPrice(parseFloat(total) - (parseFloat(coupon.discount) || 0.0) + ((parseFloat(restaurant_info.restaurant_charges) || 0.0) + (parseFloat(_this.state.delivery_charges) || 0.0)));\n        }\n      } else {\n        calc = formatPrice(parseFloat(total) + parseFloat(restaurant_info.restaurant_charges || 0.0) + parseFloat(deliveryCharges || 0.0));\n      }\n\n      if (localStorage.getItem(\"taxApplicable\") === \"true\") {\n        calc = formatPrice(parseFloat(parseFloat(calc) + parseFloat(parseFloat(localStorage.getItem(\"taxPercentage\")) / 100) * calc));\n      }\n\n      if (tips.value > 0) {\n        calc = parseFloat(calc) + parseFloat(tips.value);\n      }\n\n      return formatPrice(calc);\n    };\n\n    _this.checkAndSetAppliedAmount = function () {\n      var elem = \"\";\n\n      if (localStorage.getItem(\"currencySymbolAlign\") === \"left\") {\n        elem = \"(\" + localStorage.getItem(\"currencyFormat\") + localStorage.getItem(\"couponAppliedAmount\") + \")\";\n      } else {\n        elem = \"(\" + localStorage.getItem(\"couponAppliedAmount\") + localStorage.getItem(\"currencyFormat\") + \")\";\n      }\n\n      if (_this.refs.appliedAmount) {\n        _this.refs.appliedAmount.innerHTML = elem;\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(BillDetails, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (localStorage.getItem(\"userSelected\") === \"SELFPICKUP\") {\n        this.setState({\n          delivery_charges: 0\n        });\n      } else {\n        this.setState({\n          delivery_charges: this.props.restaurant_info.delivery_charges\n        });\n      }\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var _this2 = this;\n\n      if (localStorage.getItem(\"userSelected\") === \"DELIVERY\") {\n        if (this.props.restaurant_info.delivery_charges !== nextProps.restaurant_info.delivery_charges) {\n          this.setState({\n            delivery_charges: nextProps.restaurant_info.delivery_charges\n          });\n        }\n      }\n\n      if (nextProps.distance) {\n        if (localStorage.getItem(\"userSelected\") === \"DELIVERY\") {\n          if (nextProps.restaurant_info.delivery_charge_type === \"DYNAMIC\") {\n            this.setState({\n              distance: nextProps.distance\n            }, function () {\n              //check if restaurant has dynamic delivery charge..\n              _this2.calculateDynamicDeliveryCharge();\n            });\n          }\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          total = _this$props2.total,\n          restaurant_info = _this$props2.restaurant_info,\n          coupon = _this$props2.coupon,\n          tips = _this$props2.tips,\n          removeTip = _this$props2.removeTip,\n          deliveryCharges = _this$props2.deliveryCharges;\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"px-15\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"bg-white bill-details mb-200 \".concat(!this.props.alreadyRunningOrders && \"border-radius-4px\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"p-15\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"bill-detail-text m-0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, localStorage.getItem(\"cartBillDetailsText\")), React.createElement(\"div\", {\n        className: \"display-flex\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"flex-auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, localStorage.getItem(\"cartItemTotalText\")), React.createElement(\"div\", {\n        className: \"flex-auto text-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, localStorage.getItem(\"currencySymbolAlign\") === \"left\" && localStorage.getItem(\"currencyFormat\"), formatPrice(total), localStorage.getItem(\"currencySymbolAlign\") === \"right\" && localStorage.getItem(\"currencyFormat\"))), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }), coupon.code && React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"display-flex\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"flex-auto coupon-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, localStorage.getItem(\"cartCouponText\")), React.createElement(\"div\", {\n        className: \"flex-auto text-right coupon-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, \"-\"), coupon.discount_type === \"PERCENTAGE\" ? React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, coupon.discount, \"%\", \" \", React.createElement(\"span\", {\n        className: \"coupon-appliedAmount\",\n        ref: \"appliedAmount\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, this.checkAndSetAppliedAmount())) : React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, localStorage.getItem(\"currencySymbolAlign\") === \"left\" && localStorage.getItem(\"currencyFormat\") + coupon.discount, localStorage.getItem(\"currencySymbolAlign\") === \"right\" && coupon.discount + localStorage.getItem(\"currencyFormat\")))), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      })), restaurant_info.restaurant_charges === \"0.00\" || restaurant_info.restaurant_charges === null ? null : React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"display-flex\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"flex-auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, localStorage.getItem(\"cartRestaurantCharges\")), React.createElement(\"div\", {\n        className: \"flex-auto text-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, localStorage.getItem(\"currencySymbolAlign\") === \"left\" && localStorage.getItem(\"currencyFormat\"), restaurant_info.restaurant_charges, localStorage.getItem(\"currencySymbolAlign\") === \"right\" && localStorage.getItem(\"currencyFormat\"))), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      })), this.state.delivery_charges === 0 ? React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"display-flex\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"flex-auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, localStorage.getItem(\"cartDeliveryCharges\")), React.createElement(\"div\", {\n        className: \"flex-auto text-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, localStorage.getItem(\"currencySymbolAlign\") === \"left\" && localStorage.getItem(\"currencyFormat\"), deliveryCharges, localStorage.getItem(\"currencySymbolAlign\") === \"right\" && localStorage.getItem(\"currencyFormat\"))), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      })) : React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"display-flex\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"flex-auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      }, localStorage.getItem(\"cartDeliveryCharges\")), React.createElement(\"div\", {\n        className: \"flex-auto text-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, localStorage.getItem(\"currencySymbolAlign\") === \"left\" && localStorage.getItem(\"currencyFormat\"), formatPrice(deliveryCharges), localStorage.getItem(\"currencySymbolAlign\") === \"right\" && localStorage.getItem(\"currencyFormat\"))), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      })), localStorage.getItem(\"taxApplicable\") === \"true\" && React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"display-flex\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"flex-auto text-danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, localStorage.getItem(\"taxText\")), React.createElement(\"div\", {\n        className: \"flex-auto text-right text-danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, \"+\"), localStorage.getItem(\"taxPercentage\"), \"%\")), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      })), tips.value !== 0 && React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"display-flex\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"flex-auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }, localStorage.getItem(\"tipText\")), React.createElement(\"div\", {\n        className: \"flex-auto text-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }, localStorage.getItem(\"currencySymbolAlign\") === \"left\" && localStorage.getItem(\"currencyFormat\"), formatPrice(tips.value), localStorage.getItem(\"currencySymbolAlign\") === \"right\" && localStorage.getItem(\"currencyFormat\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        onClick: removeTip,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }, React.createElement(\"u\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }, localStorage.getItem(\"cartRemoveTipText\"))))), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"display-flex\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"flex-auto font-w700\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      }, localStorage.getItem(\"cartToPayText\")), React.createElement(\"div\", {\n        className: \"flex-auto text-right font-w700\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      }, localStorage.getItem(\"currencySymbolAlign\") === \"left\" && localStorage.getItem(\"currencyFormat\"), this.getTotalAfterCalculation(), localStorage.getItem(\"currencySymbolAlign\") === \"right\" && localStorage.getItem(\"currencyFormat\"))), localStorage.getItem(\"userSelected\") === \"SELFPICKUP\" && React.createElement(\"p\", {\n        className: \"my-2 mt-3 text-danger font-weight-bold\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }, localStorage.getItem(\"selectedSelfPickupMessage\"))))));\n    }\n  }]);\n\n  return BillDetails;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    coupon: state.coupon.coupon,\n    restaurant_info: state.items.restaurant_info\n  };\n};\n\nexport default connect(mapStateToProps, {\n  couponApplied: couponApplied\n})(BillDetails);","map":{"version":3,"sources":["C:\\xampp\\htdocs\\foodomaa\\src\\components\\Mobile\\Cart\\BillDetails\\index.js"],"names":["React","Component","connect","formatPrice","couponApplied","BillDetails","state","delivery_charges","distance","tips","couponAppliedAmount","calculateDynamicDeliveryCharge","restaurant_info","props","distanceFromUserToRestaurant","console","log","base_delivery_distance","extraDistance","extraCharge","extra_delivery_distance","extra_delivery_charge","dynamicDeliveryCharge","parseFloat","base_delivery_charge","localStorage","getItem","Math","ceil","setState","getTotalAfterCalculation","total","coupon","deliveryCharges","calc","code","discount_type","percentage_discount","discount","max_discount","saveCouponAppliedAmount","Promise","resolve","setItem","then","checkAndSetAppliedAmount","restaurant_charges","value","elem","refs","appliedAmount","innerHTML","nextProps","delivery_charge_type","removeTip","alreadyRunningOrders","mapStateToProps","items"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport { formatPrice } from \"../../../helpers/formatPrice\";\r\nimport { couponApplied } from \"../../../../services/coupon/actions\";\r\n\r\nclass BillDetails extends Component {\r\n\tstate = {\r\n\t\tdelivery_charges: 0,\r\n\t\tdistance: 0,\r\n\t\ttips: 0,\r\n\t\tcouponAppliedAmount: 0,\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (localStorage.getItem(\"userSelected\") === \"SELFPICKUP\") {\r\n\t\t\tthis.setState({ delivery_charges: 0 });\r\n\t\t} else {\r\n\t\t\tthis.setState({ delivery_charges: this.props.restaurant_info.delivery_charges });\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (localStorage.getItem(\"userSelected\") === \"DELIVERY\") {\r\n\t\t\tif (this.props.restaurant_info.delivery_charges !== nextProps.restaurant_info.delivery_charges) {\r\n\t\t\t\tthis.setState({ delivery_charges: nextProps.restaurant_info.delivery_charges });\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (nextProps.distance) {\r\n\t\t\tif (localStorage.getItem(\"userSelected\") === \"DELIVERY\") {\r\n\t\t\t\tif (nextProps.restaurant_info.delivery_charge_type === \"DYNAMIC\") {\r\n\t\t\t\t\tthis.setState({ distance: nextProps.distance }, () => {\r\n\t\t\t\t\t\t//check if restaurant has dynamic delivery charge..\r\n\t\t\t\t\t\tthis.calculateDynamicDeliveryCharge();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcalculateDynamicDeliveryCharge = () => {\r\n\t\tconst { restaurant_info } = this.props;\r\n\r\n\t\tconst distanceFromUserToRestaurant = this.state.distance;\r\n\t\tconsole.log(\"Distance from user to restaurant: \" + distanceFromUserToRestaurant + \" km\");\r\n\r\n\t\tif (distanceFromUserToRestaurant > restaurant_info.base_delivery_distance) {\r\n\t\t\tconst extraDistance = distanceFromUserToRestaurant - restaurant_info.base_delivery_distance;\r\n\t\t\tconsole.log(\"Extra Distance: \" + extraDistance + \" km\");\r\n\r\n\t\t\tconst extraCharge =\r\n\t\t\t\t(extraDistance / restaurant_info.extra_delivery_distance) * restaurant_info.extra_delivery_charge;\r\n\t\t\tconsole.log(\"Extra Charge: \" + extraCharge);\r\n\r\n\t\t\tlet dynamicDeliveryCharge = parseFloat(restaurant_info.base_delivery_charge) + parseFloat(extraCharge);\r\n\t\t\tconsole.log(\"Total Charge: \" + dynamicDeliveryCharge);\r\n\t\t\tif (localStorage.getItem(\"enDelChrRnd\") === \"true\") {\r\n\t\t\t\tdynamicDeliveryCharge = Math.ceil(dynamicDeliveryCharge);\r\n\t\t\t}\r\n\r\n\t\t\tthis.setState({ delivery_charges: dynamicDeliveryCharge });\r\n\t\t} else {\r\n\t\t\tthis.setState({ delivery_charges: restaurant_info.base_delivery_charge });\r\n\t\t}\r\n\t};\r\n\r\n\t// Calculating total with/without coupon/tax\r\n\tgetTotalAfterCalculation = () => {\r\n\t\tconst { total, restaurant_info, coupon, tips, deliveryCharges } = this.props;\r\n\t\tlet calc = 0;\r\n\t\tif (coupon.code) {\r\n\t\t\tif (coupon.discount_type === \"PERCENTAGE\") {\r\n\t\t\t\tlet percentage_discount = formatPrice((coupon.discount / 100) * parseFloat(total));\r\n\t\t\t\tif (coupon.max_discount) {\r\n\t\t\t\t\tif (parseFloat(percentage_discount) >= coupon.max_discount) {\r\n\t\t\t\t\t\tpercentage_discount = coupon.max_discount;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.props.couponApplied(coupon, percentage_discount);\r\n\t\t\t\tconst saveCouponAppliedAmount = new Promise((resolve) => {\r\n\t\t\t\t\tlocalStorage.setItem(\"couponAppliedAmount\", percentage_discount);\r\n\t\t\t\t\tresolve(\"Saved\");\r\n\t\t\t\t});\r\n\t\t\t\tsaveCouponAppliedAmount.then(() => {\r\n\t\t\t\t\tthis.checkAndSetAppliedAmount();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tcalc = formatPrice(\r\n\t\t\t\t\tformatPrice(\r\n\t\t\t\t\t\tparseFloat(total) -\r\n\t\t\t\t\t\t\tpercentage_discount +\r\n\t\t\t\t\t\t\tparseFloat(restaurant_info.restaurant_charges || 0.0) +\r\n\t\t\t\t\t\t\tparseFloat(this.state.delivery_charges || 0.0)\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tcalc = formatPrice(\r\n\t\t\t\t\tparseFloat(total) -\r\n\t\t\t\t\t\t(parseFloat(coupon.discount) || 0.0) +\r\n\t\t\t\t\t\t((parseFloat(restaurant_info.restaurant_charges) || 0.0) +\r\n\t\t\t\t\t\t\t(parseFloat(this.state.delivery_charges) || 0.0))\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tcalc = formatPrice(\r\n\t\t\t\tparseFloat(total) +\r\n\t\t\t\t\tparseFloat(restaurant_info.restaurant_charges || 0.0) +\r\n\t\t\t\t\tparseFloat(deliveryCharges || 0.0)\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif (localStorage.getItem(\"taxApplicable\") === \"true\") {\r\n\t\t\tcalc = formatPrice(\r\n\t\t\t\tparseFloat(\r\n\t\t\t\t\tparseFloat(calc) + parseFloat(parseFloat(localStorage.getItem(\"taxPercentage\")) / 100) * calc\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif (tips.value > 0) {\r\n\t\t\tcalc = parseFloat(calc) + parseFloat(tips.value);\r\n\t\t}\r\n\r\n\t\treturn formatPrice(calc);\r\n\t};\r\n\r\n\tcheckAndSetAppliedAmount = () => {\r\n\t\tlet elem = \"\";\r\n\t\tif (localStorage.getItem(\"currencySymbolAlign\") === \"left\") {\r\n\t\t\telem = \"(\" + localStorage.getItem(\"currencyFormat\") + localStorage.getItem(\"couponAppliedAmount\") + \")\";\r\n\t\t} else {\r\n\t\t\telem = \"(\" + localStorage.getItem(\"couponAppliedAmount\") + localStorage.getItem(\"currencyFormat\") + \")\";\r\n\t\t}\r\n\r\n\t\tif (this.refs.appliedAmount) {\r\n\t\t\tthis.refs.appliedAmount.innerHTML = elem;\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { total, restaurant_info, coupon, tips, removeTip, deliveryCharges } = this.props;\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<div className=\"px-15\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName={`bg-white bill-details mb-200 ${!this.props.alreadyRunningOrders &&\r\n\t\t\t\t\t\t\t\"border-radius-4px\"}`}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div className=\"p-15\">\r\n\t\t\t\t\t\t\t<h2 className=\"bill-detail-text m-0\">{localStorage.getItem(\"cartBillDetailsText\")}</h2>\r\n\t\t\t\t\t\t\t<div className=\"display-flex\">\r\n\t\t\t\t\t\t\t\t<div className=\"flex-auto\">{localStorage.getItem(\"cartItemTotalText\")}</div>\r\n\t\t\t\t\t\t\t\t<div className=\"flex-auto text-right\">\r\n\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"left\" &&\r\n\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t{formatPrice(total)}\r\n\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"right\" &&\r\n\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t{coupon.code && (\r\n\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t<div className=\"display-flex\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-auto coupon-text\">\r\n\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"cartCouponText\")}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-auto text-right coupon-text\">\r\n\t\t\t\t\t\t\t\t\t\t\t<span>-</span>\r\n\t\t\t\t\t\t\t\t\t\t\t{coupon.discount_type === \"PERCENTAGE\" ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{coupon.discount}%{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"coupon-appliedAmount\" ref=\"appliedAmount\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{this.checkAndSetAppliedAmount()}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"left\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\") + coupon.discount}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"right\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcoupon.discount + localStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{restaurant_info.restaurant_charges === \"0.00\" ||\r\n\t\t\t\t\t\t\trestaurant_info.restaurant_charges === null ? null : (\r\n\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t<div className=\"display-flex\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-auto\">{localStorage.getItem(\"cartRestaurantCharges\")}</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-auto text-right\">\r\n\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"left\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t\t{restaurant_info.restaurant_charges}\r\n\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"right\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t{this.state.delivery_charges === 0 ? (\r\n\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t<div className=\"display-flex\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-auto\">{localStorage.getItem(\"cartDeliveryCharges\")}</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-auto text-right\">\r\n\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"left\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t\t{deliveryCharges}\r\n\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"right\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t<div className=\"display-flex\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-auto\">{localStorage.getItem(\"cartDeliveryCharges\")}</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-auto text-right\">\r\n\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"left\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t\t{formatPrice(deliveryCharges)}\r\n\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"right\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t{localStorage.getItem(\"taxApplicable\") === \"true\" && (\r\n\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t<div className=\"display-flex\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-auto text-danger\">{localStorage.getItem(\"taxText\")}</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-auto text-right text-danger\">\r\n\t\t\t\t\t\t\t\t\t\t\t<span>+</span>\r\n\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"taxPercentage\")}%\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t{tips.value !== 0 && (\r\n\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t<div className=\"display-flex\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-auto\">{localStorage.getItem(\"tipText\")}</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-auto text-right\">\r\n\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"left\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t\t{formatPrice(tips.value)}\r\n\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"right\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t\t\t<span onClick={removeTip}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<u>{localStorage.getItem(\"cartRemoveTipText\")}</u>\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t<div className=\"display-flex\">\r\n\t\t\t\t\t\t\t\t<div className=\"flex-auto font-w700\">{localStorage.getItem(\"cartToPayText\")}</div>\r\n\t\t\t\t\t\t\t\t<div className=\"flex-auto text-right font-w700\">\r\n\t\t\t\t\t\t\t\t\t{/* Calculating total after discount coupon or without discount coupon */}\r\n\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"left\" &&\r\n\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t{this.getTotalAfterCalculation()}\r\n\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"right\" &&\r\n\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{localStorage.getItem(\"userSelected\") === \"SELFPICKUP\" && (\r\n\t\t\t\t\t\t\t\t<p className=\"my-2 mt-3 text-danger font-weight-bold\">\r\n\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"selectedSelfPickupMessage\")}\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tcoupon: state.coupon.coupon,\r\n\trestaurant_info: state.items.restaurant_info,\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\t{ couponApplied }\r\n)(BillDetails);\r\n"]},"metadata":{},"sourceType":"module"}