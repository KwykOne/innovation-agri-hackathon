{"ast":null,"code":"import _defineProperty from \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\src\\\\components\\\\Mobile\\\\GeoLocationPage\\\\index.js\";\nimport React, { Component } from \"react\";\nimport ContentLoader from \"react-content-loader\";\nimport DelayLink from \"../../helpers/delayLink\"; // import Geocode from \"react-geocode\";\n\nimport GoogleMap from \"./GoogleMap\";\nimport Ink from \"react-ink\";\nimport { connect } from \"react-redux\";\nimport { saveAddress } from \"../../../services/addresses/actions\";\nimport { Redirect } from \"react-router\";\nimport Meta from \"../../helpers/meta\";\nimport { GET_ADDRESS_FROM_COORDINATES } from \"../../../configs\";\nimport Axios from \"axios\";\nimport SimpleReactValidator from \"simple-react-validator\";\nimport Loading from \"../../helpers/loading\";\nexport var GeoLocationPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(GeoLocationPage, _Component);\n\n  function GeoLocationPage() {\n    var _this;\n\n    _classCallCheck(this, GeoLocationPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(GeoLocationPage).call(this));\n    _this.state = {\n      location: \"\",\n      dragging: false,\n      house: null,\n      tag: null,\n      error: false,\n      loading: false\n    };\n\n    _this.handleAddressInput = function (event) {\n      var _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.reverseLookup = function (lat, lng) {\n      Axios.post(GET_ADDRESS_FROM_COORDINATES, {\n        lat: lat,\n        lng: lng\n      }).then(function (response) {\n        // console.log(response.data);\n        _this.setState({\n          location: response.data,\n          dragging: false\n        });\n      }).catch(function (error) {\n        alert(error.response.data);\n        console.warn(error.response.data);\n      });\n    };\n\n    _this.onMarkerDragEnd = function (map) {\n      console.log(map);\n      console.log({\n        lat: map.center.lat(),\n        lng: map.center.lng()\n      });\n      localStorage.setItem(\"userLat\", map.center.lat());\n      localStorage.setItem(\"userLng\", map.center.lng());\n\n      _this.reverseLookup(map.center.lat(), map.center.lng());\n    };\n\n    _this.handleDragging = function () {\n      _this.setState({\n        dragging: true\n      });\n\n      _this.refs.confirmGpsLocation.style.height = \"44.7vh\";\n    };\n\n    _this.handleSaveNewAddress = function () {\n      var user = _this.props.user;\n\n      if (localStorage.getItem(\"flatApartmentAddressRequired\") === \"true\") {\n        if (_this.validator.fieldValid(\"house\")) {\n          _this.__saveAddressToLS(user);\n        } else {\n          console.log(\"validation failed\");\n\n          _this.validator.showMessages();\n        }\n      } else {\n        _this.__saveAddressToLS(user);\n      }\n    };\n\n    _this.__saveAddressToLS = function (user) {\n      if (user.success) {\n        _this.setState({\n          loading: true\n        });\n\n        console.log(\"Save loggedin user address\");\n\n        _this.props.saveAddress(user.data.id, user.data.auth_token, localStorage.getItem(\"userLat\"), localStorage.getItem(\"userLng\"), _this.state.location, _this.state.house, _this.state.tag, \"get_only_default_address\");\n      } else {\n        // console.log(\"From GeoLocation page save address function\");\n        var userSetAddress = {\n          lat: localStorage.getItem(\"userLat\"),\n          lng: localStorage.getItem(\"userLng\"),\n          address: _this.state.location,\n          house: _this.state.house,\n          tag: _this.state.tag\n        }; //else save in localstorage for future use (Later when user loggsin or registers, and orders, send this address to db)\n\n        var saveUserSetAddress = new Promise(function (resolve) {\n          localStorage.setItem(\"userSetAddress\", JSON.stringify(userSetAddress));\n          resolve(\"Address Saved\");\n        });\n        saveUserSetAddress.then(function () {\n          if (localStorage.getItem(\"fromCart\") === \"1\") {\n            localStorage.removeItem(\"fromCart\");\n\n            _this.context.router.history.push(\"/cart\");\n          } else {\n            _this.context.router.history.push(\"/\");\n          }\n        });\n      }\n    };\n\n    _this.inputFocus = function () {\n      _this.refs.confirmGpsLocation.style.height = \"60vh\";\n    };\n\n    _this.handleClickOutside = function (event) {\n      if (_this.refs.confirmGpsLocation && !_this.refs.confirmGpsLocation.contains(event.target)) {\n        _this.refs.confirmGpsLocation.style.height = \"44.7vh\";\n      }\n    };\n\n    _this.getLocation = function () {\n      _this.setState({\n        location: JSON.parse(localStorage.getItem(\"geoLocation\")).formatted_address\n      });\n    };\n\n    _this.validator = new SimpleReactValidator({\n      autoForceUpdate: _assertThisInitialized(_assertThisInitialized(_this)),\n      messages: {\n        required: localStorage.getItem(\"fieldValidationMsg\")\n      }\n    });\n    return _this;\n  }\n\n  _createClass(GeoLocationPage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      document.addEventListener(\"mousedown\", this.handleClickOutside);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var _this2 = this;\n\n      console.log(nextProps.addresses); // * Saving the address makes an API call then the result of the API call is the address response, this is then listened with this method\n\n      if (this.props.address !== nextProps.addresses) {\n        console.log(\"Address saved\");\n        var userSetAddress = {\n          lat: nextProps.addresses.latitude,\n          lng: nextProps.addresses.longitude,\n          address: nextProps.addresses.address,\n          house: nextProps.addresses.house,\n          tag: nextProps.addresses.tag\n        };\n        var saveUserSetAddress = new Promise(function (resolve) {\n          localStorage.setItem(\"userSetAddress\", JSON.stringify(userSetAddress));\n          resolve(\"Address Saved\");\n        });\n        saveUserSetAddress.then(function () {\n          if (localStorage.getItem(\"fromCart\") === \"1\") {\n            localStorage.removeItem(\"fromCart\");\n\n            _this2.context.router.history.push(\"/cart\");\n          } else {\n            _this2.context.router.history.push(\"/\");\n          }\n        });\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.removeEventListener(\"mousedown\", this.handleClickOutside);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (window.innerWidth > 768) {\n        return React.createElement(Redirect, {\n          to: \"/\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184\n          },\n          __self: this\n        });\n      }\n\n      if (localStorage.getItem(\"storeColor\") === null) {\n        return React.createElement(Redirect, {\n          to: \"/\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 187\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, console.log(localStorage.getItem(\"isAllowed\")), React.createElement(Meta, {\n        seotitle: localStorage.getItem(\"seoMetaTitle\"),\n        seodescription: localStorage.getItem(\"seoMetaDescription\"),\n        ogtype: \"website\",\n        ogtitle: localStorage.getItem(\"seoOgTitle\"),\n        ogdescription: localStorage.getItem(\"seoOgDescription\"),\n        ogurl: window.location.href,\n        twittertitle: localStorage.getItem(\"seoTwitterTitle\"),\n        twitterdescription: localStorage.getItem(\"seoTwitterDescription\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }), this.state.loading && React.createElement(Loading, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }), React.createElement(GoogleMap, {\n        reverseLookup: this.reverseLookup,\n        onMarkerDragEnd: this.onMarkerDragEnd,\n        handleDragging: this.handleDragging,\n        dragging: this.state.dragging,\n        location: this.getLocation,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn search-navs-btns\",\n        style: {\n          position: \"relative\",\n          borderRadius: \"0 50px 50px 0\",\n          boxShadow: \"0 2px 8px 1px #E0E0E0\"\n        },\n        onClick: this.context.router.history.goBack,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"si si-arrow-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }), React.createElement(Ink, {\n        duration: \"500\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"confirm-gps-location\",\n        ref: \"confirmGpsLocation\",\n        onClick: this.inputFocus,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, this.state.dragging ? React.createElement(ContentLoader, {\n        height: 345,\n        width: window.innerWidth,\n        speed: 1.2,\n        primaryColor: \"#f3f3f3\",\n        secondaryColor: \"#ecebeb\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, React.createElement(\"rect\", {\n        x: \"20\",\n        y: \"15\",\n        rx: \"0\",\n        ry: \"0\",\n        width: \"110\",\n        height: \"16\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }), React.createElement(\"rect\", {\n        x: \"20\",\n        y: \"45\",\n        rx: \"0\",\n        ry: \"0\",\n        width: \"280\",\n        height: \"20\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }), React.createElement(\"rect\", {\n        x: \"315\",\n        y: \"45\",\n        rx: \"0\",\n        ry: \"0\",\n        width: \"70\",\n        height: \"20\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }), React.createElement(\"rect\", {\n        x: \"20\",\n        y: \"100\",\n        rx: \"0\",\n        ry: \"0\",\n        width: \"110\",\n        height: \"16\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }), React.createElement(\"rect\", {\n        x: \"20\",\n        y: \"130\",\n        rx: \"0\",\n        ry: \"0\",\n        width: \"280\",\n        height: \"20\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }), React.createElement(\"rect\", {\n        x: \"20\",\n        y: \"180\",\n        rx: \"0\",\n        ry: \"0\",\n        width: \"110\",\n        height: \"16\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }), React.createElement(\"rect\", {\n        x: \"20\",\n        y: \"210\",\n        rx: \"0\",\n        ry: \"0\",\n        width: \"280\",\n        height: \"20\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }), React.createElement(\"rect\", {\n        x: \"0\",\n        y: \"280\",\n        rx: \"0\",\n        ry: \"0\",\n        width: window.innerWidth,\n        height: \"60\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      })) : React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"p-15\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"mb-0 font-w600 text-muted\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }, localStorage.getItem(\"yourLocationText\")), React.createElement(\"div\", {\n        className: \"d-flex align-items-baseline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"truncate-text mb-0\",\n        style: {\n          minWidth: \"84%\",\n          fontWeight: \"500\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }, this.state.location), React.createElement(DelayLink, {\n        to: \"/search-location\",\n        delay: 400,\n        className: \"change-address-text m-0 p-5 pull-right\",\n        style: {\n          color: localStorage.getItem(\"storeColor\"),\n          position: \"relative\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }, localStorage.getItem(\"cartChangeLocation\"), React.createElement(Ink, {\n        duration: 400,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }))), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"form-group m-0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"col-12 edit-address-input-label p-0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }, localStorage.getItem(\"editAddressAddress\"), localStorage.getItem(\"flatApartmentAddressRequired\") === \"true\" && this.validator.message(\"house\", this.state.house, \"required\")), React.createElement(\"div\", {\n        className: \"col-md-9 p-0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        name: \"house\",\n        onChange: this.handleAddressInput,\n        className: \"form-control edit-address-input mb-2\",\n        value: this.state.house,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      })), React.createElement(\"label\", {\n        className: \"col-12 edit-address-input-label p-0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282\n        },\n        __self: this\n      }, localStorage.getItem(\"editAddressTag\")), React.createElement(\"div\", {\n        className: \"col-md-9  p-0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        name: \"tag\",\n        onChange: this.handleAddressInput,\n        className: \"form-control edit-address-input edit-address-tag mb-2\",\n        placeholder: localStorage.getItem(\"addressTagPlaceholder\"),\n        value: this.state.tag,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286\n        },\n        __self: this\n      })))))), !this.state.dragging && React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn-save-address\",\n        onClick: this.handleSaveNewAddress,\n        style: {\n          backgroundColor: localStorage.getItem(\"storeColor\"),\n          position: \"fixed\",\n          bottom: \"0\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301\n        },\n        __self: this\n      }, localStorage.getItem(\"buttonSaveAddress\"), React.createElement(Ink, {\n        duration: 200,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return GeoLocationPage;\n}(Component);\nGeoLocationPage.contextTypes = {\n  router: function router() {\n    return null;\n  }\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    user: state.user.user,\n    addresses: state.addresses.addresses\n  };\n};\n\nexport default connect(mapStateToProps, {\n  saveAddress: saveAddress\n})(GeoLocationPage);","map":{"version":3,"sources":["C:\\xampp\\htdocs\\foodomaa\\src\\components\\Mobile\\GeoLocationPage\\index.js"],"names":["React","Component","ContentLoader","DelayLink","GoogleMap","Ink","connect","saveAddress","Redirect","Meta","GET_ADDRESS_FROM_COORDINATES","Axios","SimpleReactValidator","Loading","GeoLocationPage","state","location","dragging","house","tag","error","loading","handleAddressInput","event","target","name","value","setState","reverseLookup","lat","lng","post","then","response","data","catch","alert","console","warn","onMarkerDragEnd","map","log","center","localStorage","setItem","handleDragging","refs","confirmGpsLocation","style","height","handleSaveNewAddress","user","props","getItem","validator","fieldValid","__saveAddressToLS","showMessages","success","id","auth_token","userSetAddress","address","saveUserSetAddress","Promise","resolve","JSON","stringify","removeItem","context","router","history","push","inputFocus","handleClickOutside","contains","getLocation","parse","formatted_address","autoForceUpdate","messages","required","document","addEventListener","nextProps","addresses","latitude","longitude","removeEventListener","window","innerWidth","href","position","borderRadius","boxShadow","goBack","minWidth","fontWeight","color","message","backgroundColor","bottom","contextTypes","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nimport ContentLoader from \"react-content-loader\";\r\nimport DelayLink from \"../../helpers/delayLink\";\r\n// import Geocode from \"react-geocode\";\r\nimport GoogleMap from \"./GoogleMap\";\r\nimport Ink from \"react-ink\";\r\nimport { connect } from \"react-redux\";\r\nimport { saveAddress } from \"../../../services/addresses/actions\";\r\nimport { Redirect } from \"react-router\";\r\nimport Meta from \"../../helpers/meta\";\r\nimport { GET_ADDRESS_FROM_COORDINATES } from \"../../../configs\";\r\nimport Axios from \"axios\";\r\nimport SimpleReactValidator from \"simple-react-validator\";\r\nimport Loading from \"../../helpers/loading\";\r\n\r\nexport class GeoLocationPage extends Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.validator = new SimpleReactValidator({\r\n\t\t\tautoForceUpdate: this,\r\n\t\t\tmessages: {\r\n\t\t\t\trequired: localStorage.getItem(\"fieldValidationMsg\"),\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n\r\n\tstatic contextTypes = {\r\n\t\trouter: () => null,\r\n\t};\r\n\r\n\tstate = {\r\n\t\tlocation: \"\",\r\n\t\tdragging: false,\r\n\t\thouse: null,\r\n\t\ttag: null,\r\n\t\terror: false,\r\n\t\tloading: false,\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\tdocument.addEventListener(\"mousedown\", this.handleClickOutside);\r\n\t}\r\n\r\n\thandleAddressInput = (event) => {\r\n\t\tconst { name, value } = event.target;\r\n\t\tthis.setState({ [name]: value });\r\n\t};\r\n\r\n\treverseLookup = (lat, lng) => {\r\n\t\tAxios.post(GET_ADDRESS_FROM_COORDINATES, {\r\n\t\t\tlat: lat,\r\n\t\t\tlng: lng,\r\n\t\t})\r\n\t\t\t.then((response) => {\r\n\t\t\t\t// console.log(response.data);\r\n\t\t\t\tthis.setState({ location: response.data, dragging: false });\r\n\t\t\t})\r\n\t\t\t.catch(function(error) {\r\n\t\t\t\talert(error.response.data);\r\n\t\t\t\tconsole.warn(error.response.data);\r\n\t\t\t});\r\n\t};\r\n\r\n\tonMarkerDragEnd = (map) => {\r\n\t\tconsole.log(map);\r\n\t\tconsole.log({ lat: map.center.lat(), lng: map.center.lng() });\r\n\t\tlocalStorage.setItem(\"userLat\", map.center.lat());\r\n\t\tlocalStorage.setItem(\"userLng\", map.center.lng());\r\n\t\tthis.reverseLookup(map.center.lat(), map.center.lng());\r\n\t};\r\n\thandleDragging = () => {\r\n\t\tthis.setState({ dragging: true });\r\n\t\tthis.refs.confirmGpsLocation.style.height = \"44.7vh\";\r\n\t};\r\n\r\n\thandleSaveNewAddress = () => {\r\n\t\tconst { user } = this.props;\r\n\r\n\t\tif (localStorage.getItem(\"flatApartmentAddressRequired\") === \"true\") {\r\n\t\t\tif (this.validator.fieldValid(\"house\")) {\r\n\t\t\t\tthis.__saveAddressToLS(user);\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(\"validation failed\");\r\n\t\t\t\tthis.validator.showMessages();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.__saveAddressToLS(user);\r\n\t\t}\r\n\t};\r\n\r\n\t__saveAddressToLS = (user) => {\r\n\t\tif (user.success) {\r\n\t\t\tthis.setState({ loading: true });\r\n\r\n\t\t\tconsole.log(\"Save loggedin user address\");\r\n\r\n\t\t\tthis.props.saveAddress(\r\n\t\t\t\tuser.data.id,\r\n\t\t\t\tuser.data.auth_token,\r\n\t\t\t\tlocalStorage.getItem(\"userLat\"),\r\n\t\t\t\tlocalStorage.getItem(\"userLng\"),\r\n\t\t\t\tthis.state.location,\r\n\t\t\t\tthis.state.house,\r\n\t\t\t\tthis.state.tag,\r\n\t\t\t\t\"get_only_default_address\"\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\t// console.log(\"From GeoLocation page save address function\");\r\n\t\t\tconst userSetAddress = {\r\n\t\t\t\tlat: localStorage.getItem(\"userLat\"),\r\n\t\t\t\tlng: localStorage.getItem(\"userLng\"),\r\n\t\t\t\taddress: this.state.location,\r\n\t\t\t\thouse: this.state.house,\r\n\t\t\t\ttag: this.state.tag,\r\n\t\t\t};\r\n\r\n\t\t\t//else save in localstorage for future use (Later when user loggsin or registers, and orders, send this address to db)\r\n\r\n\t\t\tconst saveUserSetAddress = new Promise((resolve) => {\r\n\t\t\t\tlocalStorage.setItem(\"userSetAddress\", JSON.stringify(userSetAddress));\r\n\t\t\t\tresolve(\"Address Saved\");\r\n\t\t\t});\r\n\t\t\tsaveUserSetAddress.then(() => {\r\n\t\t\t\tif (localStorage.getItem(\"fromCart\") === \"1\") {\r\n\t\t\t\t\tlocalStorage.removeItem(\"fromCart\");\r\n\t\t\t\t\tthis.context.router.history.push(\"/cart\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.context.router.history.push(\"/\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tconsole.log(nextProps.addresses);\r\n\r\n\t\t// * Saving the address makes an API call then the result of the API call is the address response, this is then listened with this method\r\n\t\tif (this.props.address !== nextProps.addresses) {\r\n\t\t\tconsole.log(\"Address saved\");\r\n\r\n\t\t\tconst userSetAddress = {\r\n\t\t\t\tlat: nextProps.addresses.latitude,\r\n\t\t\t\tlng: nextProps.addresses.longitude,\r\n\t\t\t\taddress: nextProps.addresses.address,\r\n\t\t\t\thouse: nextProps.addresses.house,\r\n\t\t\t\ttag: nextProps.addresses.tag,\r\n\t\t\t};\r\n\r\n\t\t\tconst saveUserSetAddress = new Promise((resolve) => {\r\n\t\t\t\tlocalStorage.setItem(\"userSetAddress\", JSON.stringify(userSetAddress));\r\n\t\t\t\tresolve(\"Address Saved\");\r\n\t\t\t});\r\n\t\t\tsaveUserSetAddress.then(() => {\r\n\t\t\t\tif (localStorage.getItem(\"fromCart\") === \"1\") {\r\n\t\t\t\t\tlocalStorage.removeItem(\"fromCart\");\r\n\t\t\t\t\tthis.context.router.history.push(\"/cart\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.context.router.history.push(\"/\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tinputFocus = () => {\r\n\t\tthis.refs.confirmGpsLocation.style.height = \"60vh\";\r\n\t};\r\n\thandleClickOutside = (event) => {\r\n\t\tif (this.refs.confirmGpsLocation && !this.refs.confirmGpsLocation.contains(event.target)) {\r\n\t\t\tthis.refs.confirmGpsLocation.style.height = \"44.7vh\";\r\n\t\t}\r\n\t};\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tdocument.removeEventListener(\"mousedown\", this.handleClickOutside);\r\n\t}\r\n\r\n\tgetLocation = () => {\r\n\t\tthis.setState({ location: JSON.parse(localStorage.getItem(\"geoLocation\")).formatted_address });\r\n\t};\r\n\r\n\trender() {\r\n\t\tif (window.innerWidth > 768) {\r\n\t\t\treturn <Redirect to=\"/\" />;\r\n\t\t}\r\n\t\tif (localStorage.getItem(\"storeColor\") === null) {\r\n\t\t\treturn <Redirect to={\"/\"} />;\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{console.log(localStorage.getItem(\"isAllowed\"))}\r\n\t\t\t\t<Meta\r\n\t\t\t\t\tseotitle={localStorage.getItem(\"seoMetaTitle\")}\r\n\t\t\t\t\tseodescription={localStorage.getItem(\"seoMetaDescription\")}\r\n\t\t\t\t\togtype=\"website\"\r\n\t\t\t\t\togtitle={localStorage.getItem(\"seoOgTitle\")}\r\n\t\t\t\t\togdescription={localStorage.getItem(\"seoOgDescription\")}\r\n\t\t\t\t\togurl={window.location.href}\r\n\t\t\t\t\ttwittertitle={localStorage.getItem(\"seoTwitterTitle\")}\r\n\t\t\t\t\ttwitterdescription={localStorage.getItem(\"seoTwitterDescription\")}\r\n\t\t\t\t/>\r\n\t\t\t\t{this.state.loading && <Loading />}\r\n\r\n\t\t\t\t<GoogleMap\r\n\t\t\t\t\treverseLookup={this.reverseLookup}\r\n\t\t\t\t\tonMarkerDragEnd={this.onMarkerDragEnd}\r\n\t\t\t\t\thandleDragging={this.handleDragging}\r\n\t\t\t\t\tdragging={this.state.dragging}\r\n\t\t\t\t\tlocation={this.getLocation}\r\n\t\t\t\t/>\r\n\t\t\t\t<button\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\tclassName=\"btn search-navs-btns\"\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tposition: \"relative\",\r\n\t\t\t\t\t\tborderRadius: \"0 50px 50px 0\",\r\n\t\t\t\t\t\tboxShadow: \"0 2px 8px 1px #E0E0E0\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonClick={this.context.router.history.goBack}\r\n\t\t\t\t>\r\n\t\t\t\t\t<i className=\"si si-arrow-left\" />\r\n\t\t\t\t\t<Ink duration=\"500\" />\r\n\t\t\t\t</button>\r\n\t\t\t\t<div className=\"confirm-gps-location\" ref=\"confirmGpsLocation\" onClick={this.inputFocus}>\r\n\t\t\t\t\t{this.state.dragging ? (\r\n\t\t\t\t\t\t<ContentLoader\r\n\t\t\t\t\t\t\theight={345}\r\n\t\t\t\t\t\t\twidth={window.innerWidth}\r\n\t\t\t\t\t\t\tspeed={1.2}\r\n\t\t\t\t\t\t\tprimaryColor=\"#f3f3f3\"\r\n\t\t\t\t\t\t\tsecondaryColor=\"#ecebeb\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<rect x=\"20\" y=\"15\" rx=\"0\" ry=\"0\" width=\"110\" height=\"16\" />\r\n\t\t\t\t\t\t\t<rect x=\"20\" y=\"45\" rx=\"0\" ry=\"0\" width=\"280\" height=\"20\" />\r\n\t\t\t\t\t\t\t<rect x=\"315\" y=\"45\" rx=\"0\" ry=\"0\" width=\"70\" height=\"20\" />\r\n\r\n\t\t\t\t\t\t\t<rect x=\"20\" y=\"100\" rx=\"0\" ry=\"0\" width=\"110\" height=\"16\" />\r\n\t\t\t\t\t\t\t<rect x=\"20\" y=\"130\" rx=\"0\" ry=\"0\" width=\"280\" height=\"20\" />\r\n\r\n\t\t\t\t\t\t\t<rect x=\"20\" y=\"180\" rx=\"0\" ry=\"0\" width=\"110\" height=\"16\" />\r\n\t\t\t\t\t\t\t<rect x=\"20\" y=\"210\" rx=\"0\" ry=\"0\" width=\"280\" height=\"20\" />\r\n\r\n\t\t\t\t\t\t\t<rect x=\"0\" y=\"280\" rx=\"0\" ry=\"0\" width={window.innerWidth} height=\"60\" />\r\n\t\t\t\t\t\t</ContentLoader>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t<div className=\"p-15\">\r\n\t\t\t\t\t\t\t\t<p className=\"mb-0 font-w600 text-muted\">{localStorage.getItem(\"yourLocationText\")}</p>\r\n\t\t\t\t\t\t\t\t<div className=\"d-flex align-items-baseline\">\r\n\t\t\t\t\t\t\t\t\t<p className=\"truncate-text mb-0\" style={{ minWidth: \"84%\", fontWeight: \"500\" }}>\r\n\t\t\t\t\t\t\t\t\t\t{this.state.location}\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t<DelayLink\r\n\t\t\t\t\t\t\t\t\t\tto={\"/search-location\"}\r\n\t\t\t\t\t\t\t\t\t\tdelay={400}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"change-address-text m-0 p-5 pull-right\"\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tcolor: localStorage.getItem(\"storeColor\"),\r\n\t\t\t\t\t\t\t\t\t\t\tposition: \"relative\",\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"cartChangeLocation\")}\r\n\t\t\t\t\t\t\t\t\t\t<Ink duration={400} />\r\n\t\t\t\t\t\t\t\t\t</DelayLink>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t\t<div className=\"form-group m-0\">\r\n\t\t\t\t\t\t\t\t\t<label className=\"col-12 edit-address-input-label p-0\">\r\n\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"editAddressAddress\")}\r\n\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"flatApartmentAddressRequired\") === \"true\" &&\r\n\t\t\t\t\t\t\t\t\t\t\tthis.validator.message(\"house\", this.state.house, \"required\")}\r\n\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t<div className=\"col-md-9 p-0\">\r\n\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"house\"\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleAddressInput}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control edit-address-input mb-2\"\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.house}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<label className=\"col-12 edit-address-input-label p-0\">\r\n\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"editAddressTag\")}\r\n\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t<div className=\"col-md-9  p-0\">\r\n\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"tag\"\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleAddressInput}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control edit-address-input edit-address-tag mb-2\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={localStorage.getItem(\"addressTagPlaceholder\")}\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.tag}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t{!this.state.dragging && (\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\tclassName=\"btn-save-address\"\r\n\t\t\t\t\t\tonClick={this.handleSaveNewAddress}\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tbackgroundColor: localStorage.getItem(\"storeColor\"),\r\n\t\t\t\t\t\t\tposition: \"fixed\",\r\n\t\t\t\t\t\t\tbottom: \"0\",\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{localStorage.getItem(\"buttonSaveAddress\")}\r\n\t\t\t\t\t\t<Ink duration={200} />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tuser: state.user.user,\r\n\taddresses: state.addresses.addresses,\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\t{ saveAddress }\r\n)(GeoLocationPage);\r\n"]},"metadata":{},"sourceType":"module"}