{"ast":null,"code":"import _classCallCheck from \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\src\\\\components\\\\Mobile\\\\Items\\\\index.js\";\nimport React, { Component } from \"react\";\nimport { getRestaurantInfo, getRestaurantItems, getRestaurantInfoForLoggedInUser } from \"../../../services/items/actions\";\nimport FloatCart from \"../FloatCart\";\nimport ItemList from \"./ItemList\";\nimport Meta from \"../../helpers/meta\";\nimport { Redirect } from \"react-router\";\nimport RestaurantInfo from \"./RestaurantInfo\";\nimport { connect } from \"react-redux\";\nimport Ink from \"react-ink\";\nimport Fade from \"react-reveal/Fade\";\nimport Flip from \"react-reveal/Flip\";\nimport { getSettings } from \"../../../services/settings/actions\";\nimport { getAllLanguages, getSingleLanguageData } from \"../../../services/languages/actions\";\n\nvar Items =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Items, _Component);\n\n  function Items() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Items);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Items)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      is_active: 1,\n      loading: true,\n      menuListOpen: false,\n      menuClicked: false\n    };\n\n    _this.handleMenuOpen = function () {\n      _this.setState({\n        menuListOpen: true\n      });\n\n      document.getElementsByTagName(\"html\")[0].classList.add(\"noscroll\");\n      document.getElementsByTagName(\"body\")[0].classList.add(\"noscroll\");\n    };\n\n    _this.handleClickOutside = function (event) {\n      if (_this.refs.menuItemBlock && !_this.refs.menuItemBlock.contains(event.target)) {\n        document.getElementsByTagName(\"html\")[0].classList.remove(\"noscroll\");\n        document.getElementsByTagName(\"body\")[0].classList.remove(\"noscroll\");\n\n        _this.setState({\n          menuListOpen: false\n        });\n      }\n    };\n\n    _this.handleMenuItemClick = function (event) {\n      _this.setState({\n        menuClicked: true\n      }); // console.log(event.currentTarget.dataset.name);\n\n\n      var categoryBlock = document.getElementById(event.currentTarget.dataset.name);\n      setTimeout(function () {\n        categoryBlock.scrollIntoView();\n        window.scrollBy(0, -40);\n\n        _this.setState({\n          menuListOpen: false\n        });\n\n        document.getElementsByTagName(\"html\")[0].classList.remove(\"noscroll\");\n        document.getElementsByTagName(\"body\")[0].classList.remove(\"noscroll\");\n      }, _this.state.menuClicked ? 0 : 500);\n    };\n\n    return _this;\n  }\n\n  _createClass(Items, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.getAllLanguages();\n      document.addEventListener(\"mousedown\", this.handleClickOutside);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (!this.state.is_active) {\n        document.getElementsByTagName(\"html\")[0].classList.add(\"page-inactive\");\n      }\n\n      if (this.props.languages !== nextProps.languages) {\n        if (localStorage.getItem(\"userPreferedLanguage\")) {\n          this.props.getSingleLanguageData(localStorage.getItem(\"userPreferedLanguage\"));\n        } else {\n          if (nextProps.languages.length) {\n            // console.log(\"Fetching Translation Data...\");\n            var id = nextProps.languages.filter(function (lang) {\n              return lang.is_default === 1;\n            })[0].id;\n            this.props.getSingleLanguageData(id);\n          }\n        }\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.removeEventListener(\"mousedown\", this.handleClickOutside);\n      document.getElementsByTagName(\"html\")[0].classList.remove(\"page-inactive\");\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      if (window.innerWidth > 768) {\n        return React.createElement(Redirect, {\n          to: \"/\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(Meta, {\n        seotitle: \"\".concat(this.props.restaurant_info.name, \" | \").concat(localStorage.getItem(\"seoMetaTitle\")),\n        seodescription: localStorage.getItem(\"seoMetaDescription\"),\n        ogtype: \"website\",\n        ogtitle: \"\".concat(this.props.restaurant_info.name, \" | \").concat(localStorage.getItem(\"seoOgTitle\")),\n        ogdescription: localStorage.getItem(\"seoOgDescription\"),\n        ogurl: window.location.href,\n        twittertitle: \"\".concat(this.props.restaurant_info.name, \" | \").concat(localStorage.getItem(\"seoTwitterTitle\")),\n        twitterdescription: localStorage.getItem(\"seoTwitterDescription\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        key: this.props.restaurant,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(RestaurantInfo, {\n        history: this.props.history,\n        restaurant: this.props.restaurant_info,\n        withLinkToRestaurant: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }), React.createElement(ItemList, {\n        data: this.props.restaurant_items,\n        restaurant: this.props.restaurant_info,\n        menuClicked: this.state.menuClicked,\n        shouldItemsListUpdate: localStorage.getItem(\"cleared\"),\n        restaurant_backup_items: this.props.restaurant_backup_items,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      })), this.props.restaurant_info.certificate && React.createElement(\"div\", {\n        className: \"mb-100 text-center certificate-code\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, localStorage.getItem(\"certificateCodeText\"), \" \", this.props.restaurant_info.certificate), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, !this.state.loading && React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, this.state.is_active ? React.createElement(FloatCart, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }) : React.createElement(\"div\", {\n        className: \"auth-error no-click\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"error-shake\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, localStorage.getItem(\"notAcceptingOrdersMsg\"))))), React.createElement(\"div\", {\n        className: \"menu-list-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, this.state.menuListOpen ? React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"menu-open-backdrop\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"menu-items-block\",\n        ref: \"menuItemBlock\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"menu-item-block-inner\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, this.props.restaurant_items.items && React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, Object.keys(this.props.restaurant_items.items).map(function (category, index) {\n        return React.createElement(\"div\", {\n          className: \"menu-item-block-single\",\n          key: category,\n          onClick: _this2.handleMenuItemClick,\n          \"data-name\": category + index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 151\n          },\n          __self: this\n        }, React.createElement(Fade, {\n          bottom: true,\n          duration: 150 * index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"menu-item-block-single-name\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158\n          },\n          __self: this\n        }, category), React.createElement(\"div\", {\n          className: \"menu-item-block-single-quantity\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159\n          },\n          __self: this\n        }, Object.keys(_this2.props.restaurant_items.items[category]).length)));\n      }))))) : React.createElement(\"div\", {\n        className: \"menu-button-block-main\",\n        onClick: this.handleMenuOpen,\n        style: {\n          bottom: this.props.cartTotal.productQuantity > 0 ? \"5rem\" : \"2rem\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, React.createElement(Flip, {\n        bottom: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"btn btn-menu-list\",\n        style: {\n          backgroundColor: localStorage.getItem(\"storeColor\")\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"si si-list mr-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }), \" \", localStorage.getItem(\"itemsMenuButtonText\"), React.createElement(Ink, {\n        duration: \"500\",\n        hasTouch: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }))))));\n    }\n  }]);\n\n  return Items;\n}(Component);\n\nItems.contextTypes = {\n  router: function router() {\n    return null;\n  }\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    restaurant_info: state.items.restaurant_info,\n    restaurant_items: state.items.restaurant_items,\n    cartTotal: state.total.data,\n    settings: state.settings.settings,\n    languages: state.languages.languages,\n    language: state.languages.language,\n    user: state.user.user,\n    restaurant_backup_items: state.items.restaurant_backup_items\n  };\n};\n\nexport default connect(mapStateToProps, {\n  getRestaurantInfo: getRestaurantInfo,\n  getRestaurantItems: getRestaurantItems,\n  getSettings: getSettings,\n  getAllLanguages: getAllLanguages,\n  getSingleLanguageData: getSingleLanguageData,\n  getRestaurantInfoForLoggedInUser: getRestaurantInfoForLoggedInUser\n})(Items);","map":{"version":3,"sources":["C:\\xampp\\htdocs\\foodomaa\\src\\components\\Mobile\\Items\\index.js"],"names":["React","Component","getRestaurantInfo","getRestaurantItems","getRestaurantInfoForLoggedInUser","FloatCart","ItemList","Meta","Redirect","RestaurantInfo","connect","Ink","Fade","Flip","getSettings","getAllLanguages","getSingleLanguageData","Items","state","is_active","loading","menuListOpen","menuClicked","handleMenuOpen","setState","document","getElementsByTagName","classList","add","handleClickOutside","event","refs","menuItemBlock","contains","target","remove","handleMenuItemClick","categoryBlock","getElementById","currentTarget","dataset","name","setTimeout","scrollIntoView","window","scrollBy","props","addEventListener","nextProps","languages","localStorage","getItem","length","id","filter","lang","is_default","removeEventListener","innerWidth","restaurant_info","location","href","restaurant","history","restaurant_items","restaurant_backup_items","certificate","items","Object","keys","map","category","index","bottom","cartTotal","productQuantity","backgroundColor","contextTypes","router","mapStateToProps","total","data","settings","language","user"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport {\r\n\tgetRestaurantInfo,\r\n\tgetRestaurantItems,\r\n\tgetRestaurantInfoForLoggedInUser,\r\n} from \"../../../services/items/actions\";\r\n\r\nimport FloatCart from \"../FloatCart\";\r\nimport ItemList from \"./ItemList\";\r\nimport Meta from \"../../helpers/meta\";\r\nimport { Redirect } from \"react-router\";\r\nimport RestaurantInfo from \"./RestaurantInfo\";\r\nimport { connect } from \"react-redux\";\r\nimport Ink from \"react-ink\";\r\nimport Fade from \"react-reveal/Fade\";\r\nimport Flip from \"react-reveal/Flip\";\r\n\r\nimport { getSettings } from \"../../../services/settings/actions\";\r\n\r\nimport { getAllLanguages, getSingleLanguageData } from \"../../../services/languages/actions\";\r\n\r\nclass Items extends Component {\r\n\tstatic contextTypes = {\r\n\t\trouter: () => null,\r\n\t};\r\n\tstate = {\r\n\t\tis_active: 1,\r\n\t\tloading: true,\r\n\t\tmenuListOpen: false,\r\n\t\tmenuClicked: false,\r\n\t};\r\n\tcomponentDidMount() {\r\n\t\tthis.props.getAllLanguages();\r\n\r\n\t\tdocument.addEventListener(\"mousedown\", this.handleClickOutside);\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (!this.state.is_active) {\r\n\t\t\tdocument.getElementsByTagName(\"html\")[0].classList.add(\"page-inactive\");\r\n\t\t}\r\n\t\tif (this.props.languages !== nextProps.languages) {\r\n\t\t\tif (localStorage.getItem(\"userPreferedLanguage\")) {\r\n\t\t\t\tthis.props.getSingleLanguageData(localStorage.getItem(\"userPreferedLanguage\"));\r\n\t\t\t} else {\r\n\t\t\t\tif (nextProps.languages.length) {\r\n\t\t\t\t\t// console.log(\"Fetching Translation Data...\");\r\n\t\t\t\t\tconst id = nextProps.languages.filter((lang) => lang.is_default === 1)[0].id;\r\n\t\t\t\t\tthis.props.getSingleLanguageData(id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\thandleMenuOpen = () => {\r\n\t\tthis.setState({ menuListOpen: true });\r\n\t\tdocument.getElementsByTagName(\"html\")[0].classList.add(\"noscroll\");\r\n\t\tdocument.getElementsByTagName(\"body\")[0].classList.add(\"noscroll\");\r\n\t};\r\n\r\n\thandleClickOutside = (event) => {\r\n\t\tif (this.refs.menuItemBlock && !this.refs.menuItemBlock.contains(event.target)) {\r\n\t\t\tdocument.getElementsByTagName(\"html\")[0].classList.remove(\"noscroll\");\r\n\t\t\tdocument.getElementsByTagName(\"body\")[0].classList.remove(\"noscroll\");\r\n\t\t\tthis.setState({ menuListOpen: false });\r\n\t\t}\r\n\t};\r\n\r\n\t//when menu-item clicked, go to that division and change menuListOpen =false\r\n\thandleMenuItemClick = (event) => {\r\n\t\tthis.setState({ menuClicked: true });\r\n\t\t// console.log(event.currentTarget.dataset.name);\r\n\t\tconst categoryBlock = document.getElementById(event.currentTarget.dataset.name);\r\n\r\n\t\tsetTimeout(\r\n\t\t\t() => {\r\n\t\t\t\tcategoryBlock.scrollIntoView();\r\n\t\t\t\twindow.scrollBy(0, -40);\r\n\t\t\t\tthis.setState({ menuListOpen: false });\r\n\t\t\t\tdocument.getElementsByTagName(\"html\")[0].classList.remove(\"noscroll\");\r\n\t\t\t\tdocument.getElementsByTagName(\"body\")[0].classList.remove(\"noscroll\");\r\n\t\t\t},\r\n\t\t\tthis.state.menuClicked ? 0 : 500\r\n\t\t);\r\n\t};\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tdocument.removeEventListener(\"mousedown\", this.handleClickOutside);\r\n\t\tdocument.getElementsByTagName(\"html\")[0].classList.remove(\"page-inactive\");\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (window.innerWidth > 768) {\r\n\t\t\treturn <Redirect to=\"/\" />;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<Meta\r\n\t\t\t\t\tseotitle={`${this.props.restaurant_info.name} | ${localStorage.getItem(\"seoMetaTitle\")}`}\r\n\t\t\t\t\tseodescription={localStorage.getItem(\"seoMetaDescription\")}\r\n\t\t\t\t\togtype=\"website\"\r\n\t\t\t\t\togtitle={`${this.props.restaurant_info.name} | ${localStorage.getItem(\"seoOgTitle\")}`}\r\n\t\t\t\t\togdescription={localStorage.getItem(\"seoOgDescription\")}\r\n\t\t\t\t\togurl={window.location.href}\r\n\t\t\t\t\ttwittertitle={`${this.props.restaurant_info.name} | ${localStorage.getItem(\"seoTwitterTitle\")}`}\r\n\t\t\t\t\ttwitterdescription={localStorage.getItem(\"seoTwitterDescription\")}\r\n\t\t\t\t/>\r\n\t\t\t\t<div key={this.props.restaurant}>\r\n\t\t\t\t\t<RestaurantInfo\r\n\t\t\t\t\t\thistory={this.props.history}\r\n\t\t\t\t\t\trestaurant={this.props.restaurant_info}\r\n\t\t\t\t\t\twithLinkToRestaurant={false}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<ItemList\r\n\t\t\t\t\t\tdata={this.props.restaurant_items}\r\n\t\t\t\t\t\trestaurant={this.props.restaurant_info}\r\n\t\t\t\t\t\tmenuClicked={this.state.menuClicked}\r\n\t\t\t\t\t\tshouldItemsListUpdate={localStorage.getItem(\"cleared\")}\r\n\t\t\t\t\t\trestaurant_backup_items={this.props.restaurant_backup_items}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t{this.props.restaurant_info.certificate && (\r\n\t\t\t\t\t<div className=\"mb-100 text-center certificate-code\">\r\n\t\t\t\t\t\t{localStorage.getItem(\"certificateCodeText\")} {this.props.restaurant_info.certificate}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{!this.state.loading && (\r\n\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t{this.state.is_active ? (\r\n\t\t\t\t\t\t\t\t<FloatCart />\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<div className=\"auth-error no-click\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"error-shake\">{localStorage.getItem(\"notAcceptingOrdersMsg\")}</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"menu-list-container\">\r\n\t\t\t\t\t{this.state.menuListOpen ? (\r\n\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t<div className=\"menu-open-backdrop\" />\r\n\t\t\t\t\t\t\t<div className=\"menu-items-block\" ref=\"menuItemBlock\">\r\n\t\t\t\t\t\t\t\t<div className=\"menu-item-block-inner\">\r\n\t\t\t\t\t\t\t\t\t{this.props.restaurant_items.items && (\r\n\t\t\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t{Object.keys(this.props.restaurant_items.items).map((category, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"menu-item-block-single\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={category}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.handleMenuItemClick}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdata-name={category + index}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Fade bottom duration={150 * index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"menu-item-block-single-name\">{category}</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"menu-item-block-single-quantity\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tObject.keys(this.props.restaurant_items.items[category])\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.length\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Fade>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName=\"menu-button-block-main\"\r\n\t\t\t\t\t\t\tonClick={this.handleMenuOpen}\r\n\t\t\t\t\t\t\tstyle={{ bottom: this.props.cartTotal.productQuantity > 0 ? \"5rem\" : \"2rem\" }}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Flip bottom>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn-menu-list\"\r\n\t\t\t\t\t\t\t\t\tstyle={{ backgroundColor: localStorage.getItem(\"storeColor\") }}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<i className=\"si si-list mr-1\" /> {localStorage.getItem(\"itemsMenuButtonText\")}\r\n\t\t\t\t\t\t\t\t\t<Ink duration=\"500\" hasTouch={false} />\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</Flip>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\trestaurant_info: state.items.restaurant_info,\r\n\trestaurant_items: state.items.restaurant_items,\r\n\tcartTotal: state.total.data,\r\n\tsettings: state.settings.settings,\r\n\tlanguages: state.languages.languages,\r\n\tlanguage: state.languages.language,\r\n\tuser: state.user.user,\r\n\trestaurant_backup_items: state.items.restaurant_backup_items,\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\t{\r\n\t\tgetRestaurantInfo,\r\n\t\tgetRestaurantItems,\r\n\t\tgetSettings,\r\n\t\tgetAllLanguages,\r\n\t\tgetSingleLanguageData,\r\n\t\tgetRestaurantInfoForLoggedInUser,\r\n\t}\r\n)(Items);\r\n"]},"metadata":{},"sourceType":"module"}