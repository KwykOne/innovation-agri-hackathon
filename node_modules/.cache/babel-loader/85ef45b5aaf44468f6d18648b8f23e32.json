{"ast":null,"code":"import _defineProperty from \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\foodomaa\\\\src\\\\components\\\\Mobile\\\\Cart\\\\index.js\";\nimport React, { Component } from \"react\";\nimport { checkUserRunningOrder, updateUserInfo, checkBan } from \"../../../services/user/actions\";\nimport BackWithSearch from \"../../Mobile/Elements/BackWithSearch\";\nimport BillDetails from \"./BillDetails\";\nimport CartCheckoutBlock from \"./CartCheckoutBlock\";\nimport CartItems from \"./CartItems\";\nimport Coupon from \"./Coupon\";\nimport DelayLink from \"../../helpers/delayLink\";\nimport Ink from \"react-ink\";\nimport Meta from \"../../helpers/meta\";\nimport OrderComment from \"./OrderComment\";\nimport { Redirect } from \"react-router\";\nimport RestaurantInfoCart from \"./RestaurantInfoCart\";\nimport { calculateDistance } from \"../../helpers/calculateDistance\";\nimport calculateDistanceGoogle from \"../../helpers/calculateDistanceGoogle.js\";\nimport { connect } from \"react-redux\";\nimport { getRestaurantInfoById, getRestaurantInfoAndOperationalStatus } from \"../../../services/items/actions\";\nimport { updateCart } from \"../../../services/total/actions\";\nimport { formatPrice } from \"../../helpers/formatPrice\";\nimport { addProduct } from \"../../../services/cart/actions\";\nimport { checkCartItemsAvailability } from \"../../../services/confirmCart/actions\";\nimport { GoogleApiWrapper } from \"google-maps-react\";\nimport Loading from \"../../helpers/loading\";\nimport UserBan from \"../UserBan\";\nimport { removeCoupon } from \"../../../services/coupon/actions\";\nimport Swing from \"react-reveal/Swing\";\nimport ExpressDelivery from \"./ExpressDelivery\";\n\nvar Cart =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Cart, _Component);\n\n  function Cart() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Cart);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Cart)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      loading: true,\n      alreadyRunningOrders: false,\n      is_operational_loading: true,\n      is_operational: true,\n      distance: 0,\n      is_active: false,\n      min_order_satisfied: false,\n      process_cart_loading: false,\n      is_all_items_available: false,\n      process_distance_calc_loading: false,\n      userBan: false,\n      tips: [],\n      tips_percentage: [],\n      tipsPercentageSetting: false,\n      tipsAmountSetting: false,\n      others: false,\n      percentage: false,\n      selectedTips: {\n        type: \"amount\",\n        value: 0\n      },\n      is_tips_show: true,\n      deliveryDates: [],\n      deliveryCharges: 0\n    };\n\n    _this.fetchCheckBanAgain = function (token) {\n      _this.props.checkBan(token).then(function (response) {\n        if (response) {\n          if (!response.success) {\n            _this.setState({\n              userBan: true,\n              loading: false\n            });\n          } else {\n            _this.cartOperationalSteps();\n          }\n        }\n      });\n    };\n\n    _this.cartOperationalSteps = function () {\n      var user = _this.props.user;\n\n      _this.setState({\n        loading: false\n      });\n\n      if (_this.props.cartProducts.length) {\n        document.getElementsByTagName(\"body\")[0].classList.add(\"bg-grey\");\n\n        _this.checkForItemsAvailability();\n      }\n\n      if (localStorage.getItem(\"activeRestaurant\") !== null && _this.props.cartProducts.length > 0) {\n        _this.props.getRestaurantInfoById(localStorage.getItem(\"activeRestaurant\")).then(function (response) {\n          if (response) {\n            if (response.payload.id) {\n              if (!user.success) {\n                _this.__doesRestaurantOperatesAtThisLocation(response.payload);\n              }\n            }\n          }\n        });\n      }\n\n      if (user.success) {\n        _this.props.checkUserRunningOrder(user.data.id, user.data.auth_token);\n\n        if (_this.props.cartProducts.length > 0) {\n          _this.props.updateUserInfo(user.data.id, user.data.auth_token).then(function (updatedUser) {\n            // console.log(\"THIS SHOULD BE CALLED: UPDATED USER\", updatedUser);\n            if (typeof updatedUser !== \"undefined\") {\n              if (updatedUser.payload.data.default_address !== null) {\n                var userSetAddress = {\n                  lat: updatedUser.payload.data.default_address.latitude,\n                  lng: updatedUser.payload.data.default_address.longitude,\n                  address: updatedUser.payload.data.default_address.address,\n                  house: updatedUser.payload.data.default_address.house,\n                  tag: updatedUser.payload.data.default_address.tag\n                };\n                var saveUserSetAddress = new Promise(function (resolve) {\n                  localStorage.setItem(\"userSetAddress\", JSON.stringify(userSetAddress));\n                  resolve(\"Address Saved\");\n                });\n                saveUserSetAddress.then(function () {\n                  _this.__doesRestaurantOperatesAtThisLocation(_this.props.restaurant_info);\n                }); // localStorage.setItem(\"userSetAddress\", JSON.stringify(userSetAddress));\n              } else {\n                _this.__doesRestaurantOperatesAtThisLocation(_this.props.restaurant_info);\n              }\n            } else {\n              console.warn(\"Failed to fetch update user info... Solution: Reload Page\");\n            }\n          });\n        }\n      } else {\n        _this.setState({\n          alreadyRunningOrders: false\n        });\n      }\n    };\n\n    _this.addProductQuantity = function (product) {\n      var _this$props = _this.props,\n          cartProducts = _this$props.cartProducts,\n          updateCart = _this$props.updateCart;\n      var productAlreadyInCart = false;\n      cartProducts.forEach(function (cp) {\n        if (cp.id === product.id) {\n          if (JSON.stringify(cp.selectedaddons) === JSON.stringify(product.selectedaddons)) {\n            cp.quantity += 1;\n            productAlreadyInCart = true;\n          }\n        }\n      });\n\n      if (!productAlreadyInCart) {\n        cartProducts.push(product);\n      }\n\n      updateCart(cartProducts);\n    };\n\n    _this.removeProductQuantity = function (product) {\n      var _this$props2 = _this.props,\n          cartProducts = _this$props2.cartProducts,\n          updateCart = _this$props2.updateCart;\n      var index = cartProducts.findIndex(function (p) {\n        return p.id === product.id && JSON.stringify(p) === JSON.stringify(product);\n      }); //if product is in the cart then index will be greater than 0\n\n      if (index >= 0) {\n        cartProducts.forEach(function (cp) {\n          if (cp.id === product.id) {\n            if (JSON.stringify(cp) === JSON.stringify(product)) {\n              if (cp.quantity === 1) {\n                //if quantity is 1 then remove product from cart\n                cartProducts.splice(index, 1);\n              } else {\n                //else decrement the quantity by 1\n                cp.quantity -= 1;\n              }\n            }\n          }\n        });\n        updateCart(cartProducts);\n\n        _this.props.removeCoupon();\n      }\n    };\n\n    _this.removeProduct = function (product) {\n      // console.log(product);\n      // console.log(product.id);\n      var _this$props3 = _this.props,\n          cartProducts = _this$props3.cartProducts,\n          updateCart = _this$props3.updateCart;\n      var index = cartProducts.findIndex(function (cp) {\n        return cp.id === product.id;\n      }); // console.log(index);\n\n      cartProducts.splice(index, 1); // console.log(cartProducts);\n\n      updateCart(cartProducts);\n\n      _this.props.removeCoupon();\n\n      _this.checkForItemsAvailability();\n    };\n\n    _this.getNextWeek = function (restaurant_info) {\n      console.log(\"RESTAUTR\", restaurant_info);\n      console.log(\"RESTAUTR=>>>>>>>>>>\", _this.props);\n      var timeSlotAvailability = _this.props.timeSlotAvailability;\n      console.log(\"timeSlotAvailability=>>>>>>>>>>\", timeSlotAvailability);\n\n      if (restaurant_info.id) {\n        var d = new Date().toDateString(); //today date with current time\n\n        var date = d.substr(4); // today date with 0:00 a.m.\n\n        var dailytimeSlotLimit = new Date(date).getTime() + 12 * 60 * 60 * 1000; // today date with 12:p.m.\n\n        var firstDay = new Date(new Date().getTime() + 1 * 24 * 60 * 60 * 1000);\n        var nextWeek = new Date(firstDay.getTime() + 1 * 24 * 60 * 60 * 1000);\n\n        var daylist = _this.getdates(firstDay, nextWeek);\n\n        var t = daylist.map(function (v) {\n          var d = v.toDateString();\n          var day = d.substr(0, 3);\n          var date = d.substr(4);\n          if (day == \"Mon\") return {\n            day: \"Monday\",\n            date: date\n          };\n          if (day == \"Tue\") return {\n            day: \"Tuesday\",\n            date: date\n          };\n          if (day == \"Wed\") return {\n            day: \"Wednesnday\",\n            date: date\n          };\n          if (day == \"Thu\") return {\n            day: \"Thursday\",\n            date: date\n          };\n          if (day == \"Fri\") return {\n            day: \"Friday\",\n            date: date\n          };\n          if (day == \"Sat\") return {\n            day: \"Saturday\",\n            date: date\n          };\n          if (day == \"Sun\") return {\n            day: \"Sunday\",\n            date: date\n          };\n        });\n\n        if (restaurant_info.delivery_time_slot) {\n          var timeSlots = [];\n\n          if (restaurant_info.enable_timeslot1) {\n            if (restaurant_info.timeslot1) timeSlots.push(restaurant_info.timeslot1);\n          }\n\n          if (restaurant_info.enable_timeslot2) {\n            if (restaurant_info.timeslot2) timeSlots.push(restaurant_info.timeslot2);\n          }\n\n          if (restaurant_info.enable_timeslot3) {\n            if (restaurant_info.timeslot3) timeSlots.push(restaurant_info.timeslot3);\n          }\n\n          for (var i = 0; i < t.length; i++) {\n            t[i].time = [];\n\n            for (var j = 0; j < timeSlots.length; j++) {\n              t[i].time.push({\n                time: timeSlots[j]\n              });\n            }\n          }\n\n          if (restaurant_info.enable_same_day_timeslot) {\n            var today = new Date(new Date().getTime());\n            var todayTimeSlot = {\n              day: \"Today\",\n              date: today.toDateString().substr(4),\n              time: [{\n                time: restaurant_info.same_day_timeslot\n              }]\n            };\n\n            if (timeSlotAvailability !== undefined) {\n              for (var j = 0; j < timeSlotAvailability.length; j++) {\n                if (todayTimeSlot.date == timeSlotAvailability[j].delivery_date) {\n                  for (var k = 0; k < todayTimeSlot.time.length; k++) {\n                    if (todayTimeSlot.time.time == timeSlotAvailability[j].delivery_timeslot) {\n                      if (timeSlotAvailability[j].unavailable == 1) {\n                        todayTimeSlot.time.unavailable = 1;\n                        break;\n                      } else {\n                        todayTimeSlot.time.unavailable = 0;\n                        break;\n                      }\n                    }\n                  }\n                }\n              }\n            }\n\n            if (new Date().getTime() < dailytimeSlotLimit && !todayTimeSlot.time.unavailable) {\n              t.unshift(todayTimeSlot);\n            }\n          }\n        }\n\n        _this.setState({\n          deliveryDates: t\n        });\n      }\n    };\n\n    _this.getdates = function (start, end) {\n      for (var arr = [], dt = new Date(start); dt <= end; dt.setDate(dt.getDate() + 1)) {\n        arr.push(new Date(dt));\n      }\n\n      return arr;\n    };\n\n    _this.__doesRestaurantOperatesAtThisLocation = function (restaurant_info) {\n      //send user lat long to helper, check with the current restaurant lat long and setstate accordingly\n      var user = _this.props.user;\n\n      if (user.success && user.data.default_address !== null) {\n        var self = _assertThisInitialized(_assertThisInitialized(_this));\n\n        var distance = 0;\n\n        if (localStorage.getItem(\"enGDMA\") === \"true\") {\n          _this.setState({\n            process_distance_calc_loading: true\n          });\n\n          distance = calculateDistanceGoogle(restaurant_info.longitude, restaurant_info.latitude, user.data.default_address.longitude, user.data.default_address.latitude, _this.props.google, function (distance) {\n            console.log(\"Distance:\", distance);\n            self.setState({\n              distance: distance,\n              process_distance_calc_loading: false\n            }, // self.__processRestaurantOperationalState(distance, restaurant_info)\n            self.__processRestaurantOperationalState(restaurant_info.id, user.data.default_address.latitude, user.data.default_address.longitude));\n          });\n        } else {\n          distance = calculateDistance(restaurant_info.longitude, restaurant_info.latitude, user.data.default_address.longitude, user.data.default_address.latitude);\n\n          _this.setState({\n            distance: distance\n          }, _this.__processRestaurantOperationalState(restaurant_info.id, user.data.default_address.latitude, user.data.default_address.longitude));\n        }\n      } else {\n        //if Google Distance Matrix API is enabled\n        var _self = _assertThisInitialized(_assertThisInitialized(_this));\n\n        var _distance = 0;\n\n        if (localStorage.getItem(\"userSetAddress\") !== null) {\n          if (localStorage.getItem(\"enGDMA\") === \"true\") {\n            _distance = calculateDistanceGoogle(restaurant_info.longitude, restaurant_info.latitude, JSON.parse(localStorage.getItem(\"userSetAddress\")).lng, JSON.parse(localStorage.getItem(\"userSetAddress\")).lat, _this.props.google, function (distance) {\n              console.log(distance);\n\n              _self.setState({\n                distance: distance\n              }, _self.__processRestaurantOperationalState(restaurant_info.id, JSON.parse(localStorage.getItem(\"userSetAddress\")).lat, JSON.parse(localStorage.getItem(\"userSetAddress\")).lng));\n            });\n          } else {\n            _distance = calculateDistance(restaurant_info.longitude, restaurant_info.latitude, JSON.parse(localStorage.getItem(\"userSetAddress\")).lng, JSON.parse(localStorage.getItem(\"userSetAddress\")).lat);\n\n            _this.setState({\n              distance: _distance\n            }, _this.__processRestaurantOperationalState(restaurant_info.id, JSON.parse(localStorage.getItem(\"userSetAddress\")).lat, JSON.parse(localStorage.getItem(\"userSetAddress\")).lng));\n          }\n        } else {\n          _this.setState({\n            is_operational: true,\n            is_operational_loading: false\n          });\n        }\n\n        console.log(\"Distance -> \", _this.state.distance);\n      }\n    };\n\n    _this.__processRestaurantOperationalState = function (id, lat, lng) {\n      _this.props.getRestaurantInfoAndOperationalStatus(id, lat, lng).then(function (response) {\n        if (response) {\n          if (response.payload.is_operational) {\n            _this.setState({\n              is_operational: true,\n              is_operational_loading: false\n            });\n          } else {\n            _this.setState({\n              is_operational: false,\n              is_operational_loading: false\n            });\n          }\n        }\n      });\n    };\n\n    _this.__isRestaurantActive = function (restaurant_info) {\n      if (restaurant_info.is_active) {\n        _this.setState({\n          is_active: true\n        });\n      }\n    };\n\n    _this.__checkMinOrderSatisfied = function (restaurant_info, cartTotal) {\n      if (restaurant_info.min_order_price > 0) {\n        //if not null, then check the min order price with the order total\n        var totalPrice = parseFloat(formatPrice(cartTotal.totalPrice));\n        var minOrderPrice = parseFloat(formatPrice(restaurant_info.min_order_price));\n\n        if (totalPrice >= minOrderPrice) {\n          // console.log(\"Order Can Be Placed\", totalPrice + \" -- \" + minOrderPrice);\n          _this.setState({\n            min_order_satisfied: true\n          });\n        } else {\n          // console.log(\"Order CANNOT Be Placed\", totalPrice + \" -- \" + minOrderPrice);\n          _this.setState({\n            min_order_satisfied: false\n          });\n        }\n      } else {\n        // if null, then set to satisfied to true...\n        // console.log(\"Min order price is not set\");\n        _this.setState({\n          min_order_satisfied: true\n        });\n      }\n    };\n\n    _this.checkForItemsAvailability = function () {\n      var _this$props4 = _this.props,\n          checkCartItemsAvailability = _this$props4.checkCartItemsAvailability,\n          cartProducts = _this$props4.cartProducts,\n          addProduct = _this$props4.addProduct,\n          updateCart = _this$props4.updateCart;\n\n      _this.handleProcessCartLoading(true);\n\n      checkCartItemsAvailability(cartProducts).then(function (response) {\n        _this.handleProcessCartLoading(false);\n\n        _this.setState({\n          process_cart_loading: false\n        });\n\n        if (response && response.length) {\n          var isSomeInactive = false;\n          response.map(function (arrItem) {\n            //find the item in the cart\n            var item = cartProducts.find(function (item) {\n              return item.id === arrItem.id;\n            }); //get new price and is_active status and set it.\n\n            item.is_active = arrItem.is_active;\n            item.price = arrItem.price;\n            addProduct(item);\n\n            if (!isSomeInactive) {\n              if (!arrItem.is_active) {\n                isSomeInactive = true;\n              }\n            }\n\n            return item;\n          });\n\n          if (isSomeInactive) {\n            _this.handleItemsAvailability(false);\n          } else {\n            _this.handleItemsAvailability(true);\n          }\n        }\n\n        updateCart(_this.props.cartProducts);\n      });\n    };\n\n    _this.handleProcessCartLoading = function (value) {\n      _this.setState({\n        process_cart_loading: value\n      });\n    };\n\n    _this.handleItemsAvailability = function (value) {\n      _this.setState({\n        is_all_items_available: value\n      });\n    };\n\n    _this.showOtherText = function (type) {\n      localStorage.setItem(\"cart_tips\", JSON.stringify({\n        type: type,\n        value: 0\n      }));\n\n      _this.setState({\n        others: type === \"total\",\n        percentage: type === \"percentage\",\n        selectedTips: {\n          type: type,\n          value: 0\n        }\n      });\n    };\n\n    _this.addTip = function (type, value) {\n      localStorage.setItem(\"cart_tips\", JSON.stringify({\n        type: type,\n        value: value\n      })); //localStorage.setItem(\"cart_tips\", JSON.stringify({ type : value});\n\n      _this.setState({\n        others: false,\n        percentage: false,\n        selectedTips: {\n          type: type,\n          value: value\n        }\n      });\n    };\n\n    _this.addTipInPercentage = function (type, value) {\n      var calculatedValue = _this.props.cartTotal.totalPrice * value / 100;\n      localStorage.setItem(\"cart_tips\", JSON.stringify({\n        type: type,\n        value: calculatedValue\n      })); //localStorage.setItem(\"cart_tips\", JSON.stringify({ type : value});\n\n      _this.setState({\n        others: false,\n        percentage: false,\n        selectedTips: {\n          type: type,\n          value: calculatedValue\n        }\n      });\n    };\n\n    _this.restrictAlphabates = function (e) {\n      var re = /^[0-9\\b]+$/; // let value = e.target.value;\n\n      var _e$target = e.target,\n          value = _e$target.value,\n          min = _e$target.min,\n          max = _e$target.max;\n      value = Math.max(Number(min), Math.min(Number(max), Number(value)));\n\n      if (e.target.value === \"\" || re.test(e.target.value)) {\n        if (e.target.name === \"percentageValue\" && value !== \"\") {\n          var _this$setState;\n\n          var calculatedValue = _this.props.cartTotal.totalPrice * value / 100;\n          localStorage.setItem(\"cart_tips\", JSON.stringify({\n            type: \"percentage\",\n            value: calculatedValue\n          }));\n\n          _this.setState((_this$setState = {}, _defineProperty(_this$setState, e.target.name, value), _defineProperty(_this$setState, \"selectedTips\", {\n            type: e.target.name,\n            value: calculatedValue\n          }), _this$setState));\n        }\n\n        if (e.target.name === \"flatAmount\" && value !== \"\") {\n          var _this$setState2;\n\n          localStorage.setItem(\"cart_tips\", JSON.stringify({\n            type: \"total\",\n            value: value\n          }));\n\n          _this.setState((_this$setState2 = {}, _defineProperty(_this$setState2, e.target.name, value), _defineProperty(_this$setState2, \"selectedTips\", {\n            type: e.target.name,\n            value: value\n          }), _this$setState2));\n        }\n      }\n\n      _this.setState({\n        value: value\n      });\n    };\n\n    _this.removeTip = function () {\n      _this.setState({\n        others: false,\n        percentage: false,\n        selectedTips: {\n          type: \"amount\",\n          value: 0\n        }\n      });\n\n      localStorage.removeItem(\"cart_tips\");\n\n      _this.setState({\n        tipsAmountSetting: false,\n        tipsPercentageSetting: false\n      }, function () {\n        _this.setState({\n          tipsAmountSetting: JSON.parse(localStorage.getItem(\"showTipsAmount\").toLowerCase()),\n          tipsPercentageSetting: JSON.parse(localStorage.getItem(\"showTipsPercentage\").toLowerCase())\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Cart, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      //remove tip on reload/first-load\n      localStorage.removeItem(\"cart_tips\");\n      localStorage.removeItem(\"fromCart\");\n      var user = this.props.user;\n\n      if (user.success) {\n        this.props.checkBan(user.data.auth_token).then(function (response) {\n          if (response) {\n            if (!response.success) {\n              _this2.setState({\n                userBan: true,\n                loading: false\n              });\n            } else {\n              _this2.cartOperationalSteps();\n            }\n          } else {\n            setTimeout(function () {\n              _this2.fetchCheckBanAgain(user.data.auth_token);\n            }, 2500);\n          }\n        });\n        this.setState({\n          tips: localStorage.getItem(\"tips\") !== null && localStorage.getItem(\"tips\").split(\",\"),\n          tips_percentage: localStorage.getItem(\"tips_percentage\") !== null && localStorage.getItem(\"tips_percentage\").split(\",\"),\n          tipsAmountSetting: localStorage.getItem(\"showTipsAmount\") !== null && JSON.parse(localStorage.getItem(\"showTipsAmount\").toLowerCase()),\n          tipsPercentageSetting: localStorage.getItem(\"showTipsPercentage\") !== null && JSON.parse(localStorage.getItem(\"showTipsPercentage\").toLowerCase())\n        }); // console.log(localStorage.getItem(\"userSelected\"));\n\n        if (localStorage.getItem(\"userSelected\") === \"SELFPICKUP\") {\n          this.setState({\n            is_tips_show: true\n          });\n        } else {\n          this.setState({\n            is_tips_show: false\n          });\n        }\n      } else {\n        this.cartOperationalSteps();\n      }\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.restaurant_info.id) {\n        this.__isRestaurantActive(nextProps.restaurant_info);\n\n        this.__checkMinOrderSatisfied(nextProps.restaurant_info, nextProps.cartTotal);\n\n        this.getNextWeek(nextProps.restaurant_info);\n      }\n\n      if (nextProps.running_order) {\n        this.setState({\n          alreadyRunningOrders: true\n        });\n      }\n\n      if (nextProps.force_reload) {\n        this.setState({\n          loading: true\n        });\n        window.location.reload();\n      }\n\n      this.setState({\n        deliveryCharges: nextProps.deliveryCharges\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.getElementsByTagName(\"body\")[0].classList.remove(\"bg-grey\"); //if cart not confirmed, then remove tip\n\n      if (!this.props.confirmCart) {\n        localStorage.removeItem(\"cart_tips\");\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      if (this.state.userBan) {\n        return React.createElement(UserBan, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 614\n          },\n          __self: this\n        });\n      }\n\n      if (window.innerWidth > 768) {\n        return React.createElement(Redirect, {\n          to: \"/\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 617\n          },\n          __self: this\n        });\n      }\n\n      if (!this.props.cartProducts.length) {\n        document.getElementsByTagName(\"body\")[0].classList.remove(\"bg-grey\");\n      }\n\n      var _this$props5 = this.props,\n          cartTotal = _this$props5.cartTotal,\n          cartProducts = _this$props5.cartProducts,\n          restaurant_info = _this$props5.restaurant_info;\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 625\n        },\n        __self: this\n      }, React.createElement(Meta, {\n        seotitle: localStorage.getItem(\"cartPageTitle\"),\n        seodescription: localStorage.getItem(\"seoMetaDescription\"),\n        ogtype: \"website\",\n        ogtitle: localStorage.getItem(\"seoOgTitle\"),\n        ogdescription: localStorage.getItem(\"seoOgDescription\"),\n        ogurl: window.location.href,\n        twittertitle: localStorage.getItem(\"seoTwitterTitle\"),\n        twitterdescription: localStorage.getItem(\"seoTwitterDescription\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 626\n        },\n        __self: this\n      }), (this.state.loading || this.state.process_distance_calc_loading || this.state.process_cart_loading) && React.createElement(\"div\", {\n        className: \"height-100 overlay-loading ongoing-payment-spin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 640\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"spin-load\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 641\n        },\n        __self: this\n      })), !this.state.loading && React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 646\n        },\n        __self: this\n      }, React.createElement(BackWithSearch, {\n        boxshadow: true,\n        has_title: true,\n        title: localStorage.getItem(\"cartPageTitle\"),\n        disable_search: true,\n        homeButton: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 647\n        },\n        __self: this\n      }), cartProducts.length ? React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 655\n        },\n        __self: this\n      }, localStorage.getItem(\"customCartMessage\") !== \"<p><br></p>\" && localStorage.getItem(\"customCartMessage\") !== \"null\" && localStorage.getItem(\"customCartMessage\") !== \"\" && React.createElement(\"div\", {\n        style: {\n          position: \"relative\",\n          paddingTop: \"4rem\",\n          marginBottom: \"-3rem\"\n        },\n        dangerouslySetInnerHTML: {\n          __html: localStorage.getItem(\"customCartMessage\")\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 659\n        },\n        __self: this\n      }), React.createElement(RestaurantInfoCart, {\n        restaurant: restaurant_info,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 671\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"p-15\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 672\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"block-content block-content-full bg-white pt-10 pb-5\",\n        style: {\n          borderTopLeftRadius: \"5px\",\n          borderTopRightRadius: \"5px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 673\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"item-text mb-10\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 677\n        },\n        __self: this\n      }, localStorage.getItem(\"cartItemsInCartText\")), cartProducts.map(function (item, index) {\n        return React.createElement(CartItems, {\n          item: item,\n          addProductQuantity: _this3.addProductQuantity,\n          removeProductQuantity: _this3.removeProductQuantity,\n          removeProduct: _this3.removeProduct,\n          key: item.name + item.id + index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 681\n          },\n          __self: this\n        });\n      })), React.createElement(OrderComment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 690\n        },\n        __self: this\n      })), this.props.restaurant_info.delivery_time_slot ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 693\n        },\n        __self: this\n      }, React.createElement(ExpressDelivery, {\n        deliveryDates: this.state.deliveryDates,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 694\n        },\n        __self: this\n      })) : null, (this.state.tipsAmountSetting || this.state.tipsPercentageSetting) && React.createElement(\"div\", {\n        className: \"mx-15 mb-15 tips-block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 697\n        },\n        __self: this\n      }, this.state.tips && this.state.is_tips_show === false && React.createElement(\"div\", {\n        className: \"block-content block-content-full bg-white pt-10 pb-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 699\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: !this.state.tipsAmountSetting && !this.state.tipsPercentageSetting ? \"d-none\" : \"d-show\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 700\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"item-text mb-10\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 708\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 709\n        },\n        __self: this\n      }, localStorage.getItem(\"tipsForDeliveryText\"))), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 711\n        },\n        __self: this\n      }, \" \", localStorage.getItem(\"tipsThanksText\"), \".\")), this.state.tipsAmountSetting && React.createElement(\"div\", {\n        className: \"tip-switch-field\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 714\n        },\n        __self: this\n      }, this.state.tips.map(function (tipAmount, index) {\n        return React.createElement(\"div\", {\n          key: index,\n          className: \"tips\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 716\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"radio\",\n          value: tipAmount,\n          id: index,\n          name: \"switch-two\",\n          onClick: function onClick() {\n            return _this3.addTip(\"amount\", tipAmount);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 717\n          },\n          __self: this\n        }), React.createElement(\"label\", {\n          htmlFor: index,\n          className: \" \".concat(index > 0 && \"ml-5\"),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 724\n          },\n          __self: this\n        }, localStorage.getItem(\"currencySymbolAlign\") === \"left\" && localStorage.getItem(\"currencyFormat\"), tipAmount, localStorage.getItem(\"currencySymbolAlign\") === \"right\" && localStorage.getItem(\"currencyFormat\")));\n      }), React.createElement(\"div\", {\n        className: \"tips\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 738\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"radio\",\n        value: \"other\",\n        id: \"others\",\n        name: \"switch-two\",\n        onClick: function onClick(event) {\n          return _this3.showOtherText(\"total\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 739\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        htmlFor: \"others\",\n        className: \"ml-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 746\n        },\n        __self: this\n      }, localStorage.getItem(\"tipsOtherText\")))), this.state.others && React.createElement(\"input\", {\n        className: \"form-control custom-tip-input mb-15\",\n        name: \"flatAmount\",\n        type: \"text\",\n        placeholder: localStorage.getItem(\"cartTipAmountPlaceholderText\"),\n        value: this.state.flatAmount || \"\",\n        onChange: this.restrictAlphabates,\n        onKeyPress: this.restrictAlphabates,\n        min: \"0\",\n        max: \"10000\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 753\n        },\n        __self: this\n      }), this.state.tipsPercentageSetting && React.createElement(\"div\", {\n        className: \"tip-switch-field\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 768\n        },\n        __self: this\n      }, this.state.tips_percentage.map(function (tipPercentage, index) {\n        return React.createElement(\"div\", {\n          key: index,\n          className: \"tips_percentage\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 770\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"radio\",\n          value: tipPercentage,\n          id: \"\".concat(index, \"_tips_percentage\"),\n          name: \"switch-two\",\n          onClick: function onClick() {\n            return _this3.addTipInPercentage(\"amount\", tipPercentage);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 771\n          },\n          __self: this\n        }), React.createElement(\"label\", {\n          htmlFor: \"\".concat(index, \"_tips_percentage\"),\n          className: \" \".concat(index > 0 && \"ml-5\"),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 780\n          },\n          __self: this\n        }, \" \", tipPercentage, \"%\"));\n      }), React.createElement(\"div\", {\n        className: \"tips\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 789\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"radio\",\n        value: \"percentage\",\n        id: \"percentage\",\n        name: \"switch-two\",\n        onClick: function onClick() {\n          return _this3.showOtherText(\"percentage\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 790\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        htmlFor: \"percentage\",\n        className: \"ml-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 797\n        },\n        __self: this\n      }, localStorage.getItem(\"tipsOtherText\")))), this.state.percentage && React.createElement(\"input\", {\n        className: \"form-control custom-tip-input mb-15\",\n        name: \"percentageValue\",\n        type: \"text\",\n        placeholder: localStorage.getItem(\"cartTipPercentagePlaceholderText\"),\n        value: this.state.percentageValue || \"\",\n        onChange: this.restrictAlphabates,\n        onKeyPress: this.restrictAlphabates,\n        min: \"0\",\n        max: \"100\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 804\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 823\n        },\n        __self: this\n      }, React.createElement(Coupon, {\n        subtotal: this.props.cartTotal.totalPrice,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 824\n        },\n        __self: this\n      }), this.state.alreadyRunningOrders && React.createElement(\"div\", {\n        className: \"px-15\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 826\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"auth-error ongoing-order-notify\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 827\n        },\n        __self: this\n      }, React.createElement(DelayLink, {\n        to: \"/my-orders\",\n        delay: 250,\n        className: \"ml-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 828\n        },\n        __self: this\n      }, localStorage.getItem(\"ongoingOrderMsg\"), \" \", React.createElement(\"i\", {\n        className: \"si si-arrow-right ml-1\",\n        style: {\n          fontSize: \"0.7rem\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 830\n        },\n        __self: this\n      }), React.createElement(Ink, {\n        duration: \"500\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 836\n        },\n        __self: this\n      }))))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 842\n        },\n        __self: this\n      }, React.createElement(BillDetails, {\n        total: cartTotal.totalPrice,\n        distance: this.state.distance,\n        alreadyRunningOrders: this.state.alreadyRunningOrders,\n        tips: this.state.selectedTips,\n        removeTip: this.removeTip,\n        deliveryCharges: this.state.deliveryCharges,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 843\n        },\n        __self: this\n      })), this.state.is_operational_loading ? React.createElement(Loading, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 854\n        },\n        __self: this\n      }) : React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 856\n        },\n        __self: this\n      }, this.state.is_active ? React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 858\n        },\n        __self: this\n      }, this.state.min_order_satisfied ? React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 860\n        },\n        __self: this\n      }, this.state.is_all_items_available && React.createElement(CartCheckoutBlock, {\n        restaurant_id: this.props.restaurant_info.id,\n        cart_page: this.context.router.route.location.pathname,\n        is_operational_loading: this.state.is_operational_loading,\n        is_operational: this.state.is_operational,\n        handleProcessCartLoading: this.handleProcessCartLoading,\n        checkForItemsAvailability: this.checkForItemsAvailability,\n        handleItemsAvailability: this.handleItemsAvailability,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 862\n        },\n        __self: this\n      })) : React.createElement(\"div\", {\n        className: \"auth-error no-click\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 878\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"error-shake\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 879\n        },\n        __self: this\n      }, localStorage.getItem(\"restaurantMinOrderMessage\"), \" \", localStorage.getItem(\"currencySymbolAlign\") === \"left\" && localStorage.getItem(\"currencyFormat\"), this.props.restaurant_info.min_order_price, localStorage.getItem(\"currencySymbolAlign\") === \"right\" && localStorage.getItem(\"currencyFormat\")))) : React.createElement(\"div\", {\n        className: \"auth-error no-click\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 891\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"error-shake\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 892\n        },\n        __self: this\n      }, this.props.restaurant_info && this.props.restaurant_info.name, \" :\", \" \", localStorage.getItem(\"notAcceptingOrdersMsg\"))))) : React.createElement(\"div\", {\n        className: \"bg-white cart-empty-block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 902\n        },\n        __self: this\n      }, React.createElement(Swing, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 903\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"d-flex justify-content-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 904\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        className: \"cart-empty-img\",\n        src: \"/assets/img/various/cart-empty.png\",\n        alt: localStorage.getItem(\"cartEmptyText\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 905\n        },\n        __self: this\n      }))), React.createElement(\"h2\", {\n        className: \"cart-empty-text mt-50 text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 912\n        },\n        __self: this\n      }, localStorage.getItem(\"cartEmptyText\")), this.state.alreadyRunningOrders && React.createElement(\"div\", {\n        className: \"auth-error ongoing-order-notify\",\n        style: {\n          position: \"fixed\",\n          bottom: \"4.5rem\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 916\n        },\n        __self: this\n      }, React.createElement(DelayLink, {\n        to: \"/my-orders\",\n        delay: 250,\n        className: \"ml-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 923\n        },\n        __self: this\n      }, localStorage.getItem(\"ongoingOrderMsg\"), \" \", React.createElement(\"i\", {\n        className: \"si si-arrow-right ml-1\",\n        style: {\n          fontSize: \"0.7rem\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 925\n        },\n        __self: this\n      }), React.createElement(Ink, {\n        duration: \"500\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 926\n        },\n        __self: this\n      }))))));\n    }\n  }]);\n\n  return Cart;\n}(Component);\n\nCart.contextTypes = {\n  router: function router() {\n    return null;\n  }\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    restaurant_info: state.items.restaurant_info,\n    cartProducts: state.cart.products,\n    cartTotal: state.total.data,\n    user: state.user.user,\n    running_order: state.user.running_order,\n    restaurant: state.restaurant,\n    coupon: state.coupon.coupon,\n    force_reload: state.helper.force_reload,\n    tips: state.tips,\n    tips_percentage: state.tips_percentage,\n    confirmCart: state.confirmCart.confirmCart,\n    deliveryCharges: state.delivery_datetime.deliveryCharges,\n    delivery_datetime: state.delivery_datetime.delivery_datetime,\n    timeslotAvailability: state.delivery_datetime.timeslotAvailability\n  };\n};\n\nexport default GoogleApiWrapper({\n  apiKey: localStorage.getItem(\"googleApiKey\"),\n  LoadingContainer: Loading\n})(connect(mapStateToProps, {\n  checkUserRunningOrder: checkUserRunningOrder,\n  updateCart: updateCart,\n  getRestaurantInfoById: getRestaurantInfoById,\n  updateUserInfo: updateUserInfo,\n  addProduct: addProduct,\n  checkCartItemsAvailability: checkCartItemsAvailability,\n  checkBan: checkBan,\n  getRestaurantInfoAndOperationalStatus: getRestaurantInfoAndOperationalStatus,\n  removeCoupon: removeCoupon\n})(Cart));","map":{"version":3,"sources":["C:\\xampp\\htdocs\\foodomaa\\src\\components\\Mobile\\Cart\\index.js"],"names":["React","Component","checkUserRunningOrder","updateUserInfo","checkBan","BackWithSearch","BillDetails","CartCheckoutBlock","CartItems","Coupon","DelayLink","Ink","Meta","OrderComment","Redirect","RestaurantInfoCart","calculateDistance","calculateDistanceGoogle","connect","getRestaurantInfoById","getRestaurantInfoAndOperationalStatus","updateCart","formatPrice","addProduct","checkCartItemsAvailability","GoogleApiWrapper","Loading","UserBan","removeCoupon","Swing","ExpressDelivery","Cart","state","loading","alreadyRunningOrders","is_operational_loading","is_operational","distance","is_active","min_order_satisfied","process_cart_loading","is_all_items_available","process_distance_calc_loading","userBan","tips","tips_percentage","tipsPercentageSetting","tipsAmountSetting","others","percentage","selectedTips","type","value","is_tips_show","deliveryDates","deliveryCharges","fetchCheckBanAgain","token","props","then","response","success","setState","cartOperationalSteps","user","cartProducts","length","document","getElementsByTagName","classList","add","checkForItemsAvailability","localStorage","getItem","payload","id","__doesRestaurantOperatesAtThisLocation","data","auth_token","updatedUser","default_address","userSetAddress","lat","latitude","lng","longitude","address","house","tag","saveUserSetAddress","Promise","resolve","setItem","JSON","stringify","restaurant_info","console","warn","addProductQuantity","product","productAlreadyInCart","forEach","cp","selectedaddons","quantity","push","removeProductQuantity","index","findIndex","p","splice","removeProduct","getNextWeek","log","timeSlotAvailability","d","Date","toDateString","date","substr","dailytimeSlotLimit","getTime","firstDay","nextWeek","daylist","getdates","t","map","v","day","delivery_time_slot","timeSlots","enable_timeslot1","timeslot1","enable_timeslot2","timeslot2","enable_timeslot3","timeslot3","i","time","j","enable_same_day_timeslot","today","todayTimeSlot","same_day_timeslot","undefined","delivery_date","k","delivery_timeslot","unavailable","unshift","start","end","arr","dt","setDate","getDate","self","google","__processRestaurantOperationalState","parse","__isRestaurantActive","__checkMinOrderSatisfied","cartTotal","min_order_price","totalPrice","parseFloat","minOrderPrice","handleProcessCartLoading","isSomeInactive","arrItem","item","find","price","handleItemsAvailability","showOtherText","addTip","addTipInPercentage","calculatedValue","restrictAlphabates","e","re","target","min","max","Math","Number","test","name","removeTip","removeItem","toLowerCase","setTimeout","split","nextProps","running_order","force_reload","window","location","reload","remove","confirmCart","innerWidth","href","position","paddingTop","marginBottom","__html","borderTopLeftRadius","borderTopRightRadius","tipAmount","event","flatAmount","tipPercentage","percentageValue","fontSize","context","router","route","pathname","bottom","contextTypes","mapStateToProps","items","cart","products","total","restaurant","coupon","helper","delivery_datetime","timeslotAvailability","apiKey","LoadingContainer"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nimport { checkUserRunningOrder, updateUserInfo, checkBan } from \"../../../services/user/actions\";\r\n\r\nimport BackWithSearch from \"../../Mobile/Elements/BackWithSearch\";\r\nimport BillDetails from \"./BillDetails\";\r\nimport CartCheckoutBlock from \"./CartCheckoutBlock\";\r\nimport CartItems from \"./CartItems\";\r\nimport Coupon from \"./Coupon\";\r\nimport DelayLink from \"../../helpers/delayLink\";\r\nimport Ink from \"react-ink\";\r\nimport Meta from \"../../helpers/meta\";\r\nimport OrderComment from \"./OrderComment\";\r\nimport { Redirect } from \"react-router\";\r\nimport RestaurantInfoCart from \"./RestaurantInfoCart\";\r\nimport { calculateDistance } from \"../../helpers/calculateDistance\";\r\nimport calculateDistanceGoogle from \"../../helpers/calculateDistanceGoogle.js\";\r\nimport { connect } from \"react-redux\";\r\nimport { getRestaurantInfoById, getRestaurantInfoAndOperationalStatus } from \"../../../services/items/actions\";\r\nimport { updateCart } from \"../../../services/total/actions\";\r\nimport { formatPrice } from \"../../helpers/formatPrice\";\r\nimport { addProduct } from \"../../../services/cart/actions\";\r\n\r\nimport { checkCartItemsAvailability } from \"../../../services/confirmCart/actions\";\r\nimport { GoogleApiWrapper } from \"google-maps-react\";\r\nimport Loading from \"../../helpers/loading\";\r\nimport UserBan from \"../UserBan\";\r\nimport { removeCoupon } from \"../../../services/coupon/actions\";\r\nimport Swing from \"react-reveal/Swing\";\r\nimport ExpressDelivery from \"./ExpressDelivery\";\r\n\r\nclass Cart extends Component {\r\n\tstatic contextTypes = {\r\n\t\trouter: () => null,\r\n\t};\r\n\r\n\tstate = {\r\n\t\tloading: true,\r\n\t\talreadyRunningOrders: false,\r\n\t\tis_operational_loading: true,\r\n\t\tis_operational: true,\r\n\t\tdistance: 0,\r\n\t\tis_active: false,\r\n\t\tmin_order_satisfied: false,\r\n\t\tprocess_cart_loading: false,\r\n\t\tis_all_items_available: false,\r\n\t\tprocess_distance_calc_loading: false,\r\n\t\tuserBan: false,\r\n\t\ttips: [],\r\n\t\ttips_percentage: [],\r\n\t\ttipsPercentageSetting: false,\r\n\t\ttipsAmountSetting: false,\r\n\t\tothers: false,\r\n\t\tpercentage: false,\r\n\t\tselectedTips: {\r\n\t\t\ttype: \"amount\",\r\n\t\t\tvalue: 0,\r\n\t\t},\r\n\t\tis_tips_show: true,\r\n\t\tdeliveryDates: [],\r\n\t\tdeliveryCharges: 0,\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\t//remove tip on reload/first-load\r\n\t\tlocalStorage.removeItem(\"cart_tips\");\r\n\r\n\t\tlocalStorage.removeItem(\"fromCart\");\r\n\r\n\t\tconst { user } = this.props;\r\n\t\tif (user.success) {\r\n\t\t\tthis.props.checkBan(user.data.auth_token).then((response) => {\r\n\t\t\t\tif (response) {\r\n\t\t\t\t\tif (!response.success) {\r\n\t\t\t\t\t\tthis.setState({ userBan: true, loading: false });\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.cartOperationalSteps();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.fetchCheckBanAgain(user.data.auth_token);\r\n\t\t\t\t\t}, 2500);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\ttips: localStorage.getItem(\"tips\") !== null && localStorage.getItem(\"tips\").split(\",\"),\r\n\t\t\t\ttips_percentage:\r\n\t\t\t\t\tlocalStorage.getItem(\"tips_percentage\") !== null &&\r\n\t\t\t\t\tlocalStorage.getItem(\"tips_percentage\").split(\",\"),\r\n\t\t\t\ttipsAmountSetting:\r\n\t\t\t\t\tlocalStorage.getItem(\"showTipsAmount\") !== null &&\r\n\t\t\t\t\tJSON.parse(localStorage.getItem(\"showTipsAmount\").toLowerCase()),\r\n\t\t\t\ttipsPercentageSetting:\r\n\t\t\t\t\tlocalStorage.getItem(\"showTipsPercentage\") !== null &&\r\n\t\t\t\t\tJSON.parse(localStorage.getItem(\"showTipsPercentage\").toLowerCase()),\r\n\t\t\t});\r\n\r\n\t\t\t// console.log(localStorage.getItem(\"userSelected\"));\r\n\t\t\tif (localStorage.getItem(\"userSelected\") === \"SELFPICKUP\") {\r\n\t\t\t\tthis.setState({ is_tips_show: true });\r\n\t\t\t} else {\r\n\t\t\t\tthis.setState({ is_tips_show: false });\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.cartOperationalSteps();\r\n\t\t}\r\n\t}\r\n\r\n\tfetchCheckBanAgain = (token) => {\r\n\t\tthis.props.checkBan(token).then((response) => {\r\n\t\t\tif (response) {\r\n\t\t\t\tif (!response.success) {\r\n\t\t\t\t\tthis.setState({ userBan: true, loading: false });\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.cartOperationalSteps();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tcartOperationalSteps = () => {\r\n\t\tconst { user } = this.props;\r\n\r\n\t\tthis.setState({ loading: false });\r\n\t\tif (this.props.cartProducts.length) {\r\n\t\t\tdocument.getElementsByTagName(\"body\")[0].classList.add(\"bg-grey\");\r\n\t\t\tthis.checkForItemsAvailability();\r\n\t\t}\r\n\r\n\t\tif (localStorage.getItem(\"activeRestaurant\") !== null && this.props.cartProducts.length > 0) {\r\n\t\t\tthis.props.getRestaurantInfoById(localStorage.getItem(\"activeRestaurant\")).then((response) => {\r\n\t\t\t\tif (response) {\r\n\t\t\t\t\tif (response.payload.id) {\r\n\t\t\t\t\t\tif (!user.success) {\r\n\t\t\t\t\t\t\tthis.__doesRestaurantOperatesAtThisLocation(response.payload);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (user.success) {\r\n\t\t\tthis.props.checkUserRunningOrder(user.data.id, user.data.auth_token);\r\n\t\t\tif (this.props.cartProducts.length > 0) {\r\n\t\t\t\tthis.props.updateUserInfo(user.data.id, user.data.auth_token).then((updatedUser) => {\r\n\t\t\t\t\t// console.log(\"THIS SHOULD BE CALLED: UPDATED USER\", updatedUser);\r\n\t\t\t\t\tif (typeof updatedUser !== \"undefined\") {\r\n\t\t\t\t\t\tif (updatedUser.payload.data.default_address !== null) {\r\n\t\t\t\t\t\t\tconst userSetAddress = {\r\n\t\t\t\t\t\t\t\tlat: updatedUser.payload.data.default_address.latitude,\r\n\t\t\t\t\t\t\t\tlng: updatedUser.payload.data.default_address.longitude,\r\n\t\t\t\t\t\t\t\taddress: updatedUser.payload.data.default_address.address,\r\n\t\t\t\t\t\t\t\thouse: updatedUser.payload.data.default_address.house,\r\n\t\t\t\t\t\t\t\ttag: updatedUser.payload.data.default_address.tag,\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\tconst saveUserSetAddress = new Promise((resolve) => {\r\n\t\t\t\t\t\t\t\tlocalStorage.setItem(\"userSetAddress\", JSON.stringify(userSetAddress));\r\n\t\t\t\t\t\t\t\tresolve(\"Address Saved\");\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tsaveUserSetAddress.then(() => {\r\n\t\t\t\t\t\t\t\tthis.__doesRestaurantOperatesAtThisLocation(this.props.restaurant_info);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t// localStorage.setItem(\"userSetAddress\", JSON.stringify(userSetAddress));\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.__doesRestaurantOperatesAtThisLocation(this.props.restaurant_info);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.warn(\"Failed to fetch update user info... Solution: Reload Page\");\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.setState({ alreadyRunningOrders: false });\r\n\t\t}\r\n\t};\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (nextProps.restaurant_info.id) {\r\n\t\t\tthis.__isRestaurantActive(nextProps.restaurant_info);\r\n\r\n\t\t\tthis.__checkMinOrderSatisfied(nextProps.restaurant_info, nextProps.cartTotal);\r\n\r\n\t\t\tthis.getNextWeek(nextProps.restaurant_info);\r\n\t\t}\r\n\r\n\t\tif (nextProps.running_order) {\r\n\t\t\tthis.setState({ alreadyRunningOrders: true });\r\n\t\t}\r\n\t\tif (nextProps.force_reload) {\r\n\t\t\tthis.setState({ loading: true });\r\n\t\t\twindow.location.reload();\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tdeliveryCharges: nextProps.deliveryCharges\r\n\t\t})\r\n\t}\r\n\r\n\taddProductQuantity = (product) => {\r\n\t\tconst { cartProducts, updateCart } = this.props;\r\n\t\tlet productAlreadyInCart = false;\r\n\r\n\t\tcartProducts.forEach((cp) => {\r\n\t\t\tif (cp.id === product.id) {\r\n\t\t\t\tif (JSON.stringify(cp.selectedaddons) === JSON.stringify(product.selectedaddons)) {\r\n\t\t\t\t\tcp.quantity += 1;\r\n\t\t\t\t\tproductAlreadyInCart = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (!productAlreadyInCart) {\r\n\t\t\tcartProducts.push(product);\r\n\t\t}\r\n\r\n\t\tupdateCart(cartProducts);\r\n\t};\r\n\r\n\tremoveProductQuantity = (product) => {\r\n\t\tconst { cartProducts, updateCart } = this.props;\r\n\r\n\t\tconst index = cartProducts.findIndex(\r\n\t\t\t(p) => p.id === product.id && JSON.stringify(p) === JSON.stringify(product)\r\n\t\t);\r\n\t\t//if product is in the cart then index will be greater than 0\r\n\t\tif (index >= 0) {\r\n\t\t\tcartProducts.forEach((cp) => {\r\n\t\t\t\tif (cp.id === product.id) {\r\n\t\t\t\t\tif (JSON.stringify(cp) === JSON.stringify(product)) {\r\n\t\t\t\t\t\tif (cp.quantity === 1) {\r\n\t\t\t\t\t\t\t//if quantity is 1 then remove product from cart\r\n\t\t\t\t\t\t\tcartProducts.splice(index, 1);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//else decrement the quantity by 1\r\n\t\t\t\t\t\t\tcp.quantity -= 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tupdateCart(cartProducts);\r\n\t\t\tthis.props.removeCoupon();\r\n\t\t}\r\n\t};\r\n\r\n\tremoveProduct = (product) => {\r\n\t\t// console.log(product);\r\n\t\t// console.log(product.id);\r\n\r\n\t\tconst { cartProducts, updateCart } = this.props;\r\n\t\tconst index = cartProducts.findIndex((cp) => cp.id === product.id);\r\n\r\n\t\t// console.log(index);\r\n\t\tcartProducts.splice(index, 1);\r\n\t\t// console.log(cartProducts);\r\n\t\tupdateCart(cartProducts);\r\n\t\tthis.props.removeCoupon();\r\n\t\tthis.checkForItemsAvailability();\r\n\t};\r\n\r\n\tgetNextWeek = (restaurant_info) => {\r\n\t\tconsole.log(\"RESTAUTR\",restaurant_info)\r\n\t\tconsole.log(\"RESTAUTR=>>>>>>>>>>\",this.props)\r\n\t\tconst { timeSlotAvailability } = this.props;\r\n\t\tconsole.log(\"timeSlotAvailability=>>>>>>>>>>\",timeSlotAvailability)\r\n\t\tif (restaurant_info.id) {\r\n\t\t\tvar d = new Date().toDateString(); //today date with current time\r\n\t\t\tvar date = d.substr(4) // today date with 0:00 a.m.\r\n\t\t\tvar dailytimeSlotLimit = new Date(date).getTime() + 12 *60*60*1000; // today date with 12:p.m.\r\n\r\n\t\t\tvar firstDay = new Date(new Date().getTime() + 1 * 24 * 60 * 60 * 1000);\r\n\t\t\tvar nextWeek = new Date(firstDay.getTime() + 1 * 24 * 60 * 60 * 1000);\r\n\t\t\tvar daylist = this.getdates(firstDay, nextWeek);\r\n\t\t\tvar t = daylist.map((v) => {\r\n\t\t\t\tvar d = v.toDateString();\r\n\t\t\t\tvar day = d.substr(0, 3)\r\n\t\t\t\tvar date = d.substr(4)\r\n\t\t\t\tif (day == \"Mon\")\r\n\t\t\t\t\treturn { day: \"Monday\", date: date }\r\n\t\t\t\tif (day == \"Tue\")\r\n\t\t\t\t\treturn { day: \"Tuesday\", date: date }\r\n\t\t\t\tif (day == \"Wed\")\r\n\t\t\t\t\treturn { day: \"Wednesnday\", date: date }\r\n\t\t\t\tif (day == \"Thu\")\r\n\t\t\t\t\treturn { day: \"Thursday\", date: date }\r\n\t\t\t\tif (day == \"Fri\")\r\n\t\t\t\t\treturn { day: \"Friday\", date: date }\r\n\t\t\t\tif (day == \"Sat\")\r\n\t\t\t\t\treturn { day: \"Saturday\", date: date }\r\n\t\t\t\tif (day == \"Sun\")\r\n\t\t\t\t\treturn { day: \"Sunday\", date: date }\r\n\t\t\t})\r\n\t\t\tif (restaurant_info.delivery_time_slot) {\r\n\t\t\t\tlet timeSlots = []\r\n\t\t\t\tif (restaurant_info.enable_timeslot1) {\r\n\t\t\t\t\tif (restaurant_info.timeslot1)\r\n\t\t\t\t\t\ttimeSlots.push(restaurant_info.timeslot1)\r\n\t\t\t\t}\r\n\t\t\t\tif (restaurant_info.enable_timeslot2) {\r\n\t\t\t\t\tif (restaurant_info.timeslot2)\r\n\t\t\t\t\t\ttimeSlots.push(restaurant_info.timeslot2)\r\n\t\t\t\t}\r\n\t\t\t\tif (restaurant_info.enable_timeslot3) {\r\n\t\t\t\t\tif (restaurant_info.timeslot3)\r\n\t\t\t\t\t\ttimeSlots.push(restaurant_info.timeslot3)\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = 0; i < t.length; i++) {\r\n\t\t\t\t\tt[i].time = [];\r\n\t\t\t\t\tfor (var j = 0; j < timeSlots.length; j++) {\r\n\t\t\t\t\t\tt[i].time.push({ time: timeSlots[j] })\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(restaurant_info.enable_same_day_timeslot){\r\n\t\t\t\t\tvar today = new Date(new Date().getTime());\r\n\t\t\t\t\tvar todayTimeSlot = {\r\n\t\t\t\t\t\tday: \"Today\",\r\n\t\t\t\t\t\tdate: today.toDateString().substr(4),\r\n\t\t\t\t\t\ttime: [{time : restaurant_info.same_day_timeslot}]\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(timeSlotAvailability !== undefined){\r\n\t\t\t\t\t\tfor(var j=0; j < timeSlotAvailability.length; j++){\r\n\t\t\t\t\t\t\tif(todayTimeSlot.date == timeSlotAvailability[j].delivery_date){\r\n\t\t\t\t\t\t\t\tfor(var k=0;k < todayTimeSlot.time.length;k++){\r\n\t\t\t\t\t\t\t\t\tif(todayTimeSlot.time.time == timeSlotAvailability[j].delivery_timeslot){\r\n\t\t\t\t\t\t\t\t\t\tif(timeSlotAvailability[j].unavailable == 1){\r\n\t\t\t\t\t\t\t\t\t\t\ttodayTimeSlot.time.unavailable=1\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\ttodayTimeSlot.time.unavailable=0\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif((new Date().getTime() < dailytimeSlotLimit) && !todayTimeSlot.time.unavailable){\r\n\t\t\t\t\t\tt.unshift(todayTimeSlot)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.setState({\r\n\t\t\t\tdeliveryDates: t\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tgetdates = (start, end) => {\r\n\t\tfor (var arr = [], dt = new Date(start); dt <= end; dt.setDate(dt.getDate() + 1)) {\r\n\t\t\tarr.push(new Date(dt));\r\n\t\t}\r\n\t\treturn arr;\r\n\t};\r\n\r\n\t__doesRestaurantOperatesAtThisLocation = (restaurant_info) => {\r\n\t\t//send user lat long to helper, check with the current restaurant lat long and setstate accordingly\r\n\t\tconst { user } = this.props;\r\n\r\n\t\tif (user.success && user.data.default_address !== null) {\r\n\t\t\tlet self = this;\r\n\t\t\tlet distance = 0;\r\n\t\t\tif (localStorage.getItem(\"enGDMA\") === \"true\") {\r\n\t\t\t\tthis.setState({ process_distance_calc_loading: true });\r\n\t\t\t\tdistance = calculateDistanceGoogle(\r\n\t\t\t\t\trestaurant_info.longitude,\r\n\t\t\t\t\trestaurant_info.latitude,\r\n\t\t\t\t\tuser.data.default_address.longitude,\r\n\t\t\t\t\tuser.data.default_address.latitude,\r\n\t\t\t\t\tthis.props.google,\r\n\t\t\t\t\tfunction(distance) {\r\n\t\t\t\t\t\tconsole.log(\"Distance:\", distance);\r\n\t\t\t\t\t\tself.setState(\r\n\t\t\t\t\t\t\t{ distance: distance, process_distance_calc_loading: false },\r\n\t\t\t\t\t\t\t// self.__processRestaurantOperationalState(distance, restaurant_info)\r\n\t\t\t\t\t\t\tself.__processRestaurantOperationalState(\r\n\t\t\t\t\t\t\t\trestaurant_info.id,\r\n\t\t\t\t\t\t\t\tuser.data.default_address.latitude,\r\n\t\t\t\t\t\t\t\tuser.data.default_address.longitude\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tdistance = calculateDistance(\r\n\t\t\t\t\trestaurant_info.longitude,\r\n\t\t\t\t\trestaurant_info.latitude,\r\n\t\t\t\t\tuser.data.default_address.longitude,\r\n\t\t\t\t\tuser.data.default_address.latitude\r\n\t\t\t\t);\r\n\t\t\t\tthis.setState(\r\n\t\t\t\t\t{ distance: distance },\r\n\t\t\t\t\tthis.__processRestaurantOperationalState(\r\n\t\t\t\t\t\trestaurant_info.id,\r\n\t\t\t\t\t\tuser.data.default_address.latitude,\r\n\t\t\t\t\t\tuser.data.default_address.longitude\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t//if Google Distance Matrix API is enabled\r\n\t\t\tlet self = this;\r\n\t\t\tlet distance = 0;\r\n\t\t\tif (localStorage.getItem(\"userSetAddress\") !== null) {\r\n\t\t\t\tif (localStorage.getItem(\"enGDMA\") === \"true\") {\r\n\t\t\t\t\tdistance = calculateDistanceGoogle(\r\n\t\t\t\t\t\trestaurant_info.longitude,\r\n\t\t\t\t\t\trestaurant_info.latitude,\r\n\t\t\t\t\t\tJSON.parse(localStorage.getItem(\"userSetAddress\")).lng,\r\n\t\t\t\t\t\tJSON.parse(localStorage.getItem(\"userSetAddress\")).lat,\r\n\t\t\t\t\t\tthis.props.google,\r\n\t\t\t\t\t\tfunction(distance) {\r\n\t\t\t\t\t\t\tconsole.log(distance);\r\n\t\t\t\t\t\t\tself.setState(\r\n\t\t\t\t\t\t\t\t{ distance: distance },\r\n\t\t\t\t\t\t\t\tself.__processRestaurantOperationalState(\r\n\t\t\t\t\t\t\t\t\trestaurant_info.id,\r\n\t\t\t\t\t\t\t\t\tJSON.parse(localStorage.getItem(\"userSetAddress\")).lat,\r\n\t\t\t\t\t\t\t\t\tJSON.parse(localStorage.getItem(\"userSetAddress\")).lng\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdistance = calculateDistance(\r\n\t\t\t\t\t\trestaurant_info.longitude,\r\n\t\t\t\t\t\trestaurant_info.latitude,\r\n\t\t\t\t\t\tJSON.parse(localStorage.getItem(\"userSetAddress\")).lng,\r\n\t\t\t\t\t\tJSON.parse(localStorage.getItem(\"userSetAddress\")).lat\r\n\t\t\t\t\t);\r\n\t\t\t\t\tthis.setState(\r\n\t\t\t\t\t\t{ distance: distance },\r\n\t\t\t\t\t\tthis.__processRestaurantOperationalState(\r\n\t\t\t\t\t\t\trestaurant_info.id,\r\n\t\t\t\t\t\t\tJSON.parse(localStorage.getItem(\"userSetAddress\")).lat,\r\n\t\t\t\t\t\t\tJSON.parse(localStorage.getItem(\"userSetAddress\")).lng\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tis_operational: true,\r\n\t\t\t\t\tis_operational_loading: false,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tconsole.log(\"Distance -> \", this.state.distance);\r\n\t\t}\r\n\t};\r\n\t__processRestaurantOperationalState = (id, lat, lng) => {\r\n\t\tthis.props.getRestaurantInfoAndOperationalStatus(id, lat, lng).then((response) => {\r\n\t\t\tif (response) {\r\n\t\t\t\tif (response.payload.is_operational) {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tis_operational: true,\r\n\t\t\t\t\t\tis_operational_loading: false,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tis_operational: false,\r\n\t\t\t\t\t\tis_operational_loading: false,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\t__isRestaurantActive = (restaurant_info) => {\r\n\t\tif (restaurant_info.is_active) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tis_active: true,\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t__checkMinOrderSatisfied = (restaurant_info, cartTotal) => {\r\n\t\tif (restaurant_info.min_order_price > 0) {\r\n\t\t\t//if not null, then check the min order price with the order total\r\n\t\t\tconst totalPrice = parseFloat(formatPrice(cartTotal.totalPrice));\r\n\t\t\tconst minOrderPrice = parseFloat(formatPrice(restaurant_info.min_order_price));\r\n\t\t\tif (totalPrice >= minOrderPrice) {\r\n\t\t\t\t// console.log(\"Order Can Be Placed\", totalPrice + \" -- \" + minOrderPrice);\r\n\t\t\t\tthis.setState({ min_order_satisfied: true });\r\n\t\t\t} else {\r\n\t\t\t\t// console.log(\"Order CANNOT Be Placed\", totalPrice + \" -- \" + minOrderPrice);\r\n\t\t\t\tthis.setState({ min_order_satisfied: false });\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// if null, then set to satisfied to true...\r\n\t\t\t// console.log(\"Min order price is not set\");\r\n\t\t\tthis.setState({ min_order_satisfied: true });\r\n\t\t}\r\n\t};\r\n\r\n\tcheckForItemsAvailability = () => {\r\n\t\tconst { checkCartItemsAvailability, cartProducts, addProduct, updateCart } = this.props;\r\n\t\tthis.handleProcessCartLoading(true);\r\n\t\tcheckCartItemsAvailability(cartProducts).then((response) => {\r\n\t\t\tthis.handleProcessCartLoading(false);\r\n\t\t\tthis.setState({ process_cart_loading: false });\r\n\t\t\tif (response && response.length) {\r\n\t\t\t\tlet isSomeInactive = false;\r\n\t\t\t\tresponse.map((arrItem) => {\r\n\t\t\t\t\t//find the item in the cart\r\n\t\t\t\t\tlet item = cartProducts.find((item) => item.id === arrItem.id);\r\n\r\n\t\t\t\t\t//get new price and is_active status and set it.\r\n\t\t\t\t\titem.is_active = arrItem.is_active;\r\n\t\t\t\t\titem.price = arrItem.price;\r\n\t\t\t\t\taddProduct(item);\r\n\r\n\t\t\t\t\tif (!isSomeInactive) {\r\n\t\t\t\t\t\tif (!arrItem.is_active) {\r\n\t\t\t\t\t\t\tisSomeInactive = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t});\r\n\t\t\t\tif (isSomeInactive) {\r\n\t\t\t\t\tthis.handleItemsAvailability(false);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.handleItemsAvailability(true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tupdateCart(this.props.cartProducts);\r\n\t\t});\r\n\t};\r\n\r\n\thandleProcessCartLoading = (value) => {\r\n\t\tthis.setState({ process_cart_loading: value });\r\n\t};\r\n\r\n\thandleItemsAvailability = (value) => {\r\n\t\tthis.setState({ is_all_items_available: value });\r\n\t};\r\n\r\n\tshowOtherText = (type) => {\r\n\t\tlocalStorage.setItem(\"cart_tips\", JSON.stringify({ type: type, value: 0 }));\r\n\t\tthis.setState({\r\n\t\t\tothers: type === \"total\",\r\n\t\t\tpercentage: type === \"percentage\",\r\n\t\t\tselectedTips: { type: type, value: 0 },\r\n\t\t});\r\n\t};\r\n\taddTip = (type, value) => {\r\n\t\tlocalStorage.setItem(\"cart_tips\", JSON.stringify({ type: type, value: value }));\r\n\t\t//localStorage.setItem(\"cart_tips\", JSON.stringify({ type : value});\r\n\t\tthis.setState({ others: false, percentage: false, selectedTips: { type: type, value: value } });\r\n\t};\r\n\taddTipInPercentage = (type, value) => {\r\n\t\tlet calculatedValue = (this.props.cartTotal.totalPrice * value) / 100;\r\n\t\tlocalStorage.setItem(\"cart_tips\", JSON.stringify({ type: type, value: calculatedValue }));\r\n\t\t//localStorage.setItem(\"cart_tips\", JSON.stringify({ type : value});\r\n\t\tthis.setState({ others: false, percentage: false, selectedTips: { type: type, value: calculatedValue } });\r\n\t};\r\n\t// onInputchange = (event) => {\r\n\t// \tthis.setState({\r\n\t// \t\t[event.target.name]: event.target.value,\r\n\t// \t\tselectedTips: { type: event.target.name, value: event.target.value },\r\n\t// \t});\r\n\t// \t// localStorage.setItem(\"orderComment\", event.target.value);\r\n\t// };\r\n\trestrictAlphabates = (e) => {\r\n\t\tconst re = /^[0-9\\b]+$/;\r\n\t\t// let value = e.target.value;\r\n\t\tlet { value, min, max } = e.target;\r\n\t\tvalue = Math.max(Number(min), Math.min(Number(max), Number(value)));\r\n\r\n\t\tif (e.target.value === \"\" || re.test(e.target.value)) {\r\n\t\t\tif (e.target.name === \"percentageValue\" && value !== \"\") {\r\n\t\t\t\tlet calculatedValue = (this.props.cartTotal.totalPrice * value) / 100;\r\n\t\t\t\tlocalStorage.setItem(\"cart_tips\", JSON.stringify({ type: \"percentage\", value: calculatedValue }));\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\t[e.target.name]: value,\r\n\t\t\t\t\tselectedTips: { type: e.target.name, value: calculatedValue },\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (e.target.name === \"flatAmount\" && value !== \"\") {\r\n\t\t\t\tlocalStorage.setItem(\"cart_tips\", JSON.stringify({ type: \"total\", value: value }));\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\t[e.target.name]: value,\r\n\t\t\t\t\tselectedTips: { type: e.target.name, value: value },\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.setState({ value });\r\n\t};\r\n\r\n\tremoveTip = () => {\r\n\t\tthis.setState({ others: false, percentage: false, selectedTips: { type: \"amount\", value: 0 } });\r\n\t\tlocalStorage.removeItem(\"cart_tips\");\r\n\r\n\t\tthis.setState({ tipsAmountSetting: false, tipsPercentageSetting: false }, () => {\r\n\t\t\tthis.setState({\r\n\t\t\t\ttipsAmountSetting: JSON.parse(localStorage.getItem(\"showTipsAmount\").toLowerCase()),\r\n\t\t\t\ttipsPercentageSetting: JSON.parse(localStorage.getItem(\"showTipsPercentage\").toLowerCase()),\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tdocument.getElementsByTagName(\"body\")[0].classList.remove(\"bg-grey\");\r\n\t\t//if cart not confirmed, then remove tip\r\n\t\tif (!this.props.confirmCart) {\r\n\t\t\tlocalStorage.removeItem(\"cart_tips\");\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.state.userBan) {\r\n\t\t\treturn <UserBan />;\r\n\t\t}\r\n\t\tif (window.innerWidth > 768) {\r\n\t\t\treturn <Redirect to=\"/\" />;\r\n\t\t}\r\n\t\tif (!this.props.cartProducts.length) {\r\n\t\t\tdocument.getElementsByTagName(\"body\")[0].classList.remove(\"bg-grey\");\r\n\t\t}\r\n\t\tconst { cartTotal, cartProducts, restaurant_info } = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<Meta\r\n\t\t\t\t\tseotitle={localStorage.getItem(\"cartPageTitle\")}\r\n\t\t\t\t\tseodescription={localStorage.getItem(\"seoMetaDescription\")}\r\n\t\t\t\t\togtype=\"website\"\r\n\t\t\t\t\togtitle={localStorage.getItem(\"seoOgTitle\")}\r\n\t\t\t\t\togdescription={localStorage.getItem(\"seoOgDescription\")}\r\n\t\t\t\t\togurl={window.location.href}\r\n\t\t\t\t\ttwittertitle={localStorage.getItem(\"seoTwitterTitle\")}\r\n\t\t\t\t\ttwitterdescription={localStorage.getItem(\"seoTwitterDescription\")}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t{(this.state.loading ||\r\n\t\t\t\t\tthis.state.process_distance_calc_loading ||\r\n\t\t\t\t\tthis.state.process_cart_loading) && (\r\n\t\t\t\t\t<div className=\"height-100 overlay-loading ongoing-payment-spin\">\r\n\t\t\t\t\t\t<div className=\"spin-load\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{!this.state.loading && (\r\n\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t<BackWithSearch\r\n\t\t\t\t\t\t\tboxshadow={true}\r\n\t\t\t\t\t\t\thas_title={true}\r\n\t\t\t\t\t\t\ttitle={localStorage.getItem(\"cartPageTitle\")}\r\n\t\t\t\t\t\t\tdisable_search={true}\r\n\t\t\t\t\t\t\thomeButton={true}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{cartProducts.length ? (\r\n\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t{localStorage.getItem(\"customCartMessage\") !== \"<p><br></p>\" &&\r\n\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"customCartMessage\") !== \"null\" &&\r\n\t\t\t\t\t\t\t\t\t(localStorage.getItem(\"customCartMessage\") !== \"\" && (\r\n\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tposition: \"relative\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tpaddingTop: \"4rem\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tmarginBottom: \"-3rem\",\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t__html: localStorage.getItem(\"customCartMessage\"),\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\r\n\t\t\t\t\t\t\t\t<RestaurantInfoCart restaurant={restaurant_info} />\r\n\t\t\t\t\t\t\t\t<div className=\"p-15\">\r\n\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"block-content block-content-full bg-white pt-10 pb-5\"\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ borderTopLeftRadius: \"5px\", borderTopRightRadius: \"5px\" }}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<h2 className=\"item-text mb-10\">\r\n\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"cartItemsInCartText\")}\r\n\t\t\t\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t\t\t\t{cartProducts.map((item, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<CartItems\r\n\t\t\t\t\t\t\t\t\t\t\t\titem={item}\r\n\t\t\t\t\t\t\t\t\t\t\t\taddProductQuantity={this.addProductQuantity}\r\n\t\t\t\t\t\t\t\t\t\t\t\tremoveProductQuantity={this.removeProductQuantity}\r\n\t\t\t\t\t\t\t\t\t\t\t\tremoveProduct={this.removeProduct}\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey={item.name + item.id + index}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<OrderComment />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t{this.props.restaurant_info.delivery_time_slot ?\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t<ExpressDelivery deliveryDates={this.state.deliveryDates} />\r\n\t\t\t\t\t\t\t\t\t</div> : null}\r\n\t\t\t\t\t\t\t\t{(this.state.tipsAmountSetting || this.state.tipsPercentageSetting) && (\r\n\t\t\t\t\t\t\t\t\t<div className=\"mx-15 mb-15 tips-block\">\r\n\t\t\t\t\t\t\t\t\t\t{this.state.tips && this.state.is_tips_show === false && (\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"block-content block-content-full bg-white pt-10 pb-5\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t!this.state.tipsAmountSetting &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t!this.state.tipsPercentageSetting\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"d-none\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"d-show\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"item-text mb-10\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<strong>{localStorage.getItem(\"tipsForDeliveryText\")}</strong>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p> {localStorage.getItem(\"tipsThanksText\")}.</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{this.state.tipsAmountSetting && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"tip-switch-field\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{this.state.tips.map((tipAmount, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div key={index} className=\"tips\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={tipAmount}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid={index}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"switch-two\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.addTip(\"amount\", tipAmount)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thtmlFor={index}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={` ${index > 0 && \"ml-5\"}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") ===\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"left\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{tipAmount}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") ===\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"right\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"tips\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"other\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"others\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"switch-two\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={(event) => this.showOtherText(\"total\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"others\" className=\"ml-5\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"tipsOtherText\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{this.state.others && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control custom-tip-input mb-15\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"flatAmount\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder={localStorage.getItem(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"cartTipAmountPlaceholderText\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.flatAmount || \"\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.restrictAlphabates}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonKeyPress={this.restrictAlphabates}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmax=\"10000\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{this.state.tipsPercentageSetting && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"tip-switch-field\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{this.state.tips_percentage.map((tipPercentage, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div key={index} className=\"tips_percentage\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={tipPercentage}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid={`${index}_tips_percentage`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"switch-two\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.addTipInPercentage(\"amount\", tipPercentage)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thtmlFor={`${index}_tips_percentage`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={` ${index > 0 && \"ml-5\"}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{tipPercentage}%\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"tips\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"percentage\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"percentage\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"switch-two\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.showOtherText(\"percentage\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"percentage\" className=\"ml-5\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"tipsOtherText\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{this.state.percentage && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control custom-tip-input mb-15\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"percentageValue\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder={localStorage.getItem(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"cartTipPercentagePlaceholderText\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.percentageValue || \"\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.restrictAlphabates}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonKeyPress={this.restrictAlphabates}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmax=\"100\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<Coupon subtotal={this.props.cartTotal.totalPrice} />\r\n\t\t\t\t\t\t\t\t\t{this.state.alreadyRunningOrders && (\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"px-15\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"auth-error ongoing-order-notify\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<DelayLink to=\"/my-orders\" delay={250} className=\"ml-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"ongoingOrderMsg\")}{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"si si-arrow-right ml-1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontSize: \"0.7rem\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Ink duration=\"500\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</DelayLink>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<BillDetails\r\n\t\t\t\t\t\t\t\t\t\ttotal={cartTotal.totalPrice}\r\n\t\t\t\t\t\t\t\t\t\tdistance={this.state.distance}\r\n\t\t\t\t\t\t\t\t\t\talreadyRunningOrders={this.state.alreadyRunningOrders}\r\n\t\t\t\t\t\t\t\t\t\ttips={this.state.selectedTips}\r\n\t\t\t\t\t\t\t\t\t\tremoveTip={this.removeTip}\r\n\t\t\t\t\t\t\t\t\t\tdeliveryCharges={this.state.deliveryCharges}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t{this.state.is_operational_loading ? (\r\n\t\t\t\t\t\t\t\t\t<Loading />\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t{this.state.is_active ? (\r\n\t\t\t\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{this.state.min_order_satisfied ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{this.state.is_all_items_available && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CartCheckoutBlock\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trestaurant_id={this.props.restaurant_info.id}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcart_page={this.context.router.route.location.pathname}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tis_operational_loading={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state.is_operational_loading\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tis_operational={this.state.is_operational}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleProcessCartLoading={this.handleProcessCartLoading}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcheckForItemsAvailability={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.checkForItemsAvailability\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleItemsAvailability={this.handleItemsAvailability}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"auth-error no-click\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"error-shake\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"restaurantMinOrderMessage\")}{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"left\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{this.props.restaurant_info.min_order_price}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"right\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"auth-error no-click\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"error-shake\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{this.props.restaurant_info && this.props.restaurant_info.name} :{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"notAcceptingOrdersMsg\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<div className=\"bg-white cart-empty-block\">\r\n\t\t\t\t\t\t\t\t<Swing>\r\n\t\t\t\t\t\t\t\t\t<div className=\"d-flex justify-content-center\">\r\n\t\t\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"cart-empty-img\"\r\n\t\t\t\t\t\t\t\t\t\t\tsrc=\"/assets/img/various/cart-empty.png\"\r\n\t\t\t\t\t\t\t\t\t\t\talt={localStorage.getItem(\"cartEmptyText\")}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</Swing>\r\n\t\t\t\t\t\t\t\t<h2 className=\"cart-empty-text mt-50 text-center\">\r\n\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"cartEmptyText\")}\r\n\t\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t\t{this.state.alreadyRunningOrders && (\r\n\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"auth-error ongoing-order-notify\"\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tposition: \"fixed\",\r\n\t\t\t\t\t\t\t\t\t\t\tbottom: \"4.5rem\",\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<DelayLink to=\"/my-orders\" delay={250} className=\"ml-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"ongoingOrderMsg\")}{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t<i className=\"si si-arrow-right ml-1\" style={{ fontSize: \"0.7rem\" }} />\r\n\t\t\t\t\t\t\t\t\t\t\t<Ink duration=\"500\" />\r\n\t\t\t\t\t\t\t\t\t\t</DelayLink>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t)}\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\trestaurant_info: state.items.restaurant_info,\r\n\tcartProducts: state.cart.products,\r\n\tcartTotal: state.total.data,\r\n\tuser: state.user.user,\r\n\trunning_order: state.user.running_order,\r\n\trestaurant: state.restaurant,\r\n\tcoupon: state.coupon.coupon,\r\n\tforce_reload: state.helper.force_reload,\r\n\ttips: state.tips,\r\n\ttips_percentage: state.tips_percentage,\r\n\tconfirmCart: state.confirmCart.confirmCart,\r\n\tdeliveryCharges: state.delivery_datetime.deliveryCharges,\r\n\tdelivery_datetime: state.delivery_datetime.delivery_datetime,\r\n\ttimeslotAvailability:state.delivery_datetime.timeslotAvailability,\r\n});\r\n\r\nexport default GoogleApiWrapper({\r\n\tapiKey: localStorage.getItem(\"googleApiKey\"),\r\n\tLoadingContainer: Loading,\r\n})(\r\n\tconnect(\r\n\t\tmapStateToProps,\r\n\t\t{\r\n\t\t\tcheckUserRunningOrder,\r\n\t\t\tupdateCart,\r\n\t\t\tgetRestaurantInfoById,\r\n\t\t\tupdateUserInfo,\r\n\t\t\taddProduct,\r\n\t\t\tcheckCartItemsAvailability,\r\n\t\t\tcheckBan,\r\n\t\t\tgetRestaurantInfoAndOperationalStatus,\r\n\t\t\tremoveCoupon,\r\n\t\t}\r\n\t)(Cart)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}