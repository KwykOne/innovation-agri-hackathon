{"ast":null,"code":"import { PLACE_ORDER } from \"./actionTypes\";\nimport { PLACE_ORDER_URL } from \"../../configs\";\nimport { APPLY_COUPON } from \"../coupon/actionTypes\";\nimport Axios from \"axios\";\nimport { updateCart } from \"../total/actions\";\nexport var placeOrder = function placeOrder(user, order, coupon, location, order_comment, total, method, payment_token, delivery_type, partial_wallet, distance, pending_payment, tipAmount, cash_change_amount, delivery_datetime, deliveryCharges) {\n  return function (dispatch, getState) {\n    return Axios.post(PLACE_ORDER_URL, {\n      token: user.data.auth_token,\n      user: user,\n      order: order,\n      coupon: coupon,\n      location: location,\n      order_comment: order_comment,\n      total: total,\n      method: method,\n      payment_token: payment_token,\n      delivery_type: delivery_type,\n      partial_wallet: partial_wallet,\n      dis: distance,\n      pending_payment: pending_payment,\n      tipAmount: tipAmount,\n      cash_change_amount: cash_change_amount,\n      delivery_datetime: delivery_datetime,\n      delivery_charges: deliveryCharges\n    }).then(function (response) {\n      var checkout = response.data;\n\n      if (checkout.success) {\n        dispatch({\n          type: PLACE_ORDER,\n          payload: checkout\n        });\n        var state = getState(); // console.log(state);\n\n        var cartProducts = state.cart.products; // const user = state.user.user;\n\n        localStorage.removeItem(\"orderComment\");\n\n        for (var i = cartProducts.length - 1; i >= 0; i--) {\n          // remove all items from cart\n          cartProducts.splice(i, 1);\n        }\n\n        dispatch(updateCart(cartProducts));\n        localStorage.removeItem(\"appliedCoupon\");\n        var _coupon = [];\n        dispatch({\n          type: APPLY_COUPON,\n          payload: _coupon\n        });\n      } else {\n        return checkout;\n      }\n    }).catch(function (error) {\n      return error.response;\n    });\n  };\n};","map":{"version":3,"sources":["C:\\xampp\\htdocs\\foodomaa\\src\\services\\checkout\\actions.js"],"names":["PLACE_ORDER","PLACE_ORDER_URL","APPLY_COUPON","Axios","updateCart","placeOrder","user","order","coupon","location","order_comment","total","method","payment_token","delivery_type","partial_wallet","distance","pending_payment","tipAmount","cash_change_amount","delivery_datetime","deliveryCharges","dispatch","getState","post","token","data","auth_token","dis","delivery_charges","then","response","checkout","success","type","payload","state","cartProducts","cart","products","localStorage","removeItem","i","length","splice","catch","error"],"mappings":"AAAA,SAASA,WAAT,QAA4B,eAA5B;AACA,SAASC,eAAT,QAAgC,eAAhC;AACA,SAASC,YAAT,QAA6B,uBAA7B;AAEA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AAEA,OAAO,IAAMC,UAAU,GAAG,SAAbA,UAAa,CACzBC,IADyB,EAEzBC,KAFyB,EAGzBC,MAHyB,EAIzBC,QAJyB,EAKzBC,aALyB,EAMzBC,KANyB,EAOzBC,MAPyB,EAQzBC,aARyB,EASzBC,aATyB,EAUzBC,cAVyB,EAWzBC,QAXyB,EAYzBC,eAZyB,EAazBC,SAbyB,EAczBC,kBAdyB,EAezBC,iBAfyB,EAgBzBC,eAhByB;AAAA,SAiBrB,UAACC,QAAD,EAAWC,QAAX,EAAwB;AAC5B,WAAOpB,KAAK,CAACqB,IAAN,CAAWvB,eAAX,EAA4B;AAClCwB,MAAAA,KAAK,EAAEnB,IAAI,CAACoB,IAAL,CAAUC,UADiB;AAElCrB,MAAAA,IAAI,EAAEA,IAF4B;AAGlCC,MAAAA,KAAK,EAAEA,KAH2B;AAIlCC,MAAAA,MAAM,EAAEA,MAJ0B;AAKlCC,MAAAA,QAAQ,EAAEA,QALwB;AAMlCC,MAAAA,aAAa,EAAEA,aANmB;AAOlCC,MAAAA,KAAK,EAAEA,KAP2B;AAQlCC,MAAAA,MAAM,EAAEA,MAR0B;AASlCC,MAAAA,aAAa,EAAEA,aATmB;AAUlCC,MAAAA,aAAa,EAAEA,aAVmB;AAWlCC,MAAAA,cAAc,EAAEA,cAXkB;AAYlCa,MAAAA,GAAG,EAAEZ,QAZ6B;AAalCC,MAAAA,eAAe,EAAEA,eAbiB;AAclCC,MAAAA,SAAS,EAAEA,SAduB;AAelCC,MAAAA,kBAAkB,EAAEA,kBAfc;AAgBlCC,MAAAA,iBAAiB,EAAEA,iBAhBe;AAiBlCS,MAAAA,gBAAgB,EAAER;AAjBgB,KAA5B,EAmBLS,IAnBK,CAmBA,UAACC,QAAD,EAAc;AACnB,UAAMC,QAAQ,GAAGD,QAAQ,CAACL,IAA1B;;AAEA,UAAIM,QAAQ,CAACC,OAAb,EAAsB;AACrBX,QAAAA,QAAQ,CAAC;AAAEY,UAAAA,IAAI,EAAElC,WAAR;AAAqBmC,UAAAA,OAAO,EAAEH;AAA9B,SAAD,CAAR;AAEA,YAAMI,KAAK,GAAGb,QAAQ,EAAtB,CAHqB,CAIrB;;AACA,YAAMc,YAAY,GAAGD,KAAK,CAACE,IAAN,CAAWC,QAAhC,CALqB,CAMrB;;AACAC,QAAAA,YAAY,CAACC,UAAb,CAAwB,cAAxB;;AAEA,aAAK,IAAIC,CAAC,GAAGL,YAAY,CAACM,MAAb,GAAsB,CAAnC,EAAsCD,CAAC,IAAI,CAA3C,EAA8CA,CAAC,EAA/C,EAAmD;AAClD;AACAL,UAAAA,YAAY,CAACO,MAAb,CAAoBF,CAApB,EAAuB,CAAvB;AACA;;AAEDpB,QAAAA,QAAQ,CAAClB,UAAU,CAACiC,YAAD,CAAX,CAAR;AAEAG,QAAAA,YAAY,CAACC,UAAb,CAAwB,eAAxB;AACA,YAAMjC,OAAM,GAAG,EAAf;AACAc,QAAAA,QAAQ,CAAC;AAAEY,UAAAA,IAAI,EAAEhC,YAAR;AAAsBiC,UAAAA,OAAO,EAAE3B;AAA/B,SAAD,CAAR;AACA,OAnBD,MAmBO;AACN,eAAOwB,QAAP;AACA;AACD,KA5CK,EA6CLa,KA7CK,CA6CC,UAASC,KAAT,EAAgB;AACtB,aAAOA,KAAK,CAACf,QAAb;AACA,KA/CK,CAAP;AAgDA,GAlEyB;AAAA,CAAnB","sourcesContent":["import { PLACE_ORDER } from \"./actionTypes\";\r\nimport { PLACE_ORDER_URL } from \"../../configs\";\r\nimport { APPLY_COUPON } from \"../coupon/actionTypes\";\r\n\r\nimport Axios from \"axios\";\r\nimport { updateCart } from \"../total/actions\";\r\n\r\nexport const placeOrder = (\r\n\tuser,\r\n\torder,\r\n\tcoupon,\r\n\tlocation,\r\n\torder_comment,\r\n\ttotal,\r\n\tmethod,\r\n\tpayment_token,\r\n\tdelivery_type,\r\n\tpartial_wallet,\r\n\tdistance,\r\n\tpending_payment,\r\n\ttipAmount,\r\n\tcash_change_amount,\r\n\tdelivery_datetime,\r\n\tdeliveryCharges\r\n) => (dispatch, getState) => {\r\n\treturn Axios.post(PLACE_ORDER_URL, {\r\n\t\ttoken: user.data.auth_token,\r\n\t\tuser: user,\r\n\t\torder: order,\r\n\t\tcoupon: coupon,\r\n\t\tlocation: location,\r\n\t\torder_comment: order_comment,\r\n\t\ttotal: total,\r\n\t\tmethod: method,\r\n\t\tpayment_token: payment_token,\r\n\t\tdelivery_type: delivery_type,\r\n\t\tpartial_wallet: partial_wallet,\r\n\t\tdis: distance,\r\n\t\tpending_payment: pending_payment,\r\n\t\ttipAmount: tipAmount,\r\n\t\tcash_change_amount: cash_change_amount,\r\n\t\tdelivery_datetime: delivery_datetime,\r\n\t\tdelivery_charges: deliveryCharges,\r\n\t})\r\n\t\t.then((response) => {\r\n\t\t\tconst checkout = response.data;\r\n\r\n\t\t\tif (checkout.success) {\r\n\t\t\t\tdispatch({ type: PLACE_ORDER, payload: checkout });\r\n\r\n\t\t\t\tconst state = getState();\r\n\t\t\t\t// console.log(state);\r\n\t\t\t\tconst cartProducts = state.cart.products;\r\n\t\t\t\t// const user = state.user.user;\r\n\t\t\t\tlocalStorage.removeItem(\"orderComment\");\r\n\r\n\t\t\t\tfor (let i = cartProducts.length - 1; i >= 0; i--) {\r\n\t\t\t\t\t// remove all items from cart\r\n\t\t\t\t\tcartProducts.splice(i, 1);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdispatch(updateCart(cartProducts));\r\n\r\n\t\t\t\tlocalStorage.removeItem(\"appliedCoupon\");\r\n\t\t\t\tconst coupon = [];\r\n\t\t\t\tdispatch({ type: APPLY_COUPON, payload: coupon });\r\n\t\t\t} else {\r\n\t\t\t\treturn checkout;\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(function(error) {\r\n\t\t\treturn error.response;\r\n\t\t});\r\n};\r\n"]},"metadata":{},"sourceType":"module"}